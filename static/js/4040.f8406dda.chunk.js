"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[4040],{9939:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var i=t(1413),o=t(29439),r=t(47313),a=t(92649),u=t(71003),l=t(69625),s=t(57775),c=t(44610),d=t(40490),f=t.n(d),m=t(16330),h=t(20466),v=t(67375),x=t(1084),S=t(33187),p=t(7410),b=t(3463),k=t(57829),Z=t(6961),j=t(20791),g=t(29417),C=t(56417),_=t(46417),y=b.Ry({name:b.Z_().required("Nama Kurikulum harus diisi")}),F=function(e){var n=new C.O(m.F8,{onSaveSuccess:e.onSaveSuccess,onSaveFailed:e.onSaveFailed});return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(p.J9,{initialValues:e.model,validationSchema:y,onSubmit:function(e,t){return n.onSubmit(e,t)},children:function(n){var t=n.isSubmitting;return(0,_.jsxs)(p.l0,{children:[(0,_.jsx)(g.nv,{variant:"filled",name:"name",placeholder:"Nama Kurikulum",label:"Nama Kurikulum"}),(0,_.jsx)(k.Z,{mt:4,children:(0,_.jsx)(g.XZ,{title:"Status",name:"isActive",label:"Aktif"})}),(0,_.jsx)(k.Z,{mt:4,children:(0,_.jsxs)(Z.Z,{children:[(0,_.jsx)(u.Z,{color:"secondary",onClick:e.onCancel,disabled:t,variant:"text",disableElevation:!0,children:"Batal"}),(0,_.jsx)(j.M,{isSubmitting:t,text:"Simpan"})]})})]})}})})},K=t(14997),L=t(70816),A=t.n(L),T=t(11193),w=function(e){var n=e.date,t=e.format,i=void 0===t?"LLLL":t;if(!n)return(0,_.jsx)(_.Fragment,{});n instanceof Date&&(n=A()(n));return(0,_.jsx)(T.Z,{title:n.format("LLLL"),children:(0,_.jsx)(k.Z,{sx:{display:"inline"},children:function(){var e=n;return e.isAfter(A()().subtract(6,"days"))?e.fromNow():e.format(i)}()})})},M=function(){var e=(0,r.useState)(null),n=(0,o.Z)(e,2),t=n[0],d=n[1],p=(0,x.I0)(),b=r.useRef(),k=r.useCallback((function(e,n){e.formMode=n,d(e)}),[]),Z=r.useCallback((function(e){p((0,v.PV)("Kurikulum berhasil disimpan")),b.current.onQueryChange(),g()}),[]),j=r.useCallback((function(){p((0,v.Tl)("Kurikulum gagal disimpan"))}),[]),g=r.useCallback((function(){d(null)}),[]),C=r.useCallback((function(){return m.F8.remove(t).then((function(e){e.status?(b.current.onQueryChange(),p((0,v.PV)("Kurikulum telah dihapus"))):p((0,v.Tl)("Kurikulum gagal dihapus"))}))}),[t]);return(0,_.jsxs)(a.Z,{title:"Pengaturan Kurikulum",toolbar:(0,_.jsx)(u.Z,{variant:"contained",onClick:function(){return d(new h.NX)},children:"Tambah Kurikulum"}),children:[t&&("create"==t.formMode||"edit"==t.formMode)&&(0,_.jsx)(S.Z,{open:!0,title:t.isNewRecord?"Tambah Kurikulum":"Perbarui Kurikulum",children:(0,_.jsx)(l.Z,{children:(0,_.jsx)(F,{model:t,onCancel:g,onSaveFailed:j,onSaveSuccess:Z})})}),t&&"delete"==t.formMode&&(0,_.jsx)(K.Z,{open:!0,onDeny:g,onConfirm:C,dialogTitle:"Hapus Kurikulum",title:"Yakin ingin menghapus kurikulum <strong>".concat(t.name,"</strong> ?")}),(0,_.jsx)(f(),{title:"",tableRef:b,components:{Toolbar:function(){return(0,_.jsx)(_.Fragment,{})},Container:function(e){return(0,_.jsx)(s.Z,(0,i.Z)({},e))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(e){return new Promise((function(n,t){m.F8.findAll({page:e.page+1}).then((function(e){e.status?n({data:e.items,page:e.page-1,totalCount:e.totalCount}):n({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Nama",field:"name"},{title:"Status",field:"isActive",render:function(e){return e.isActive?(0,_.jsx)(c.Z,{label:"Aktif",color:"success",size:"small",variant:"outlined"}):(0,_.jsx)(c.Z,{color:"error",label:"Tidak Aktif",size:"small",variant:"outlined"})}},{title:"Dibuat",field:"createdAt",render:function(e){return(0,_.jsx)(w,{date:e.createdAt,format:"LL"})}},{title:"Diperbarui",field:"updatedAt",render:function(e){return(0,_.jsx)(w,{date:e.updatedAt,format:"LL"})}}],actions:[{icon:"create",tooltip:"Edit Kurikulum",onClick:function(e,n){n instanceof h.NX&&k(n,"edit"),p((0,v.SR)())}},{icon:"delete",tooltip:"Hapus Kurikulum",iconProps:{color:"error"},onClick:function(e,n){n instanceof h.NX&&k(n,"delete")}}]})]})}},14997:function(e,n,t){var i=t(29439),o=t(1413),r=t(47313),a=t(71003),u=t(1001),l=t(50301),s=t(94469),c=t(33604),d=t(47605),f=t(69625),m=t(6961),h=t(69680),v=t(20791),x=t(65476),S=t(46417),p=r.forwardRef((function(e,n){return(0,S.jsx)(l.Z,(0,o.Z)({direction:"up",ref:n},e))}));n.Z=function(e){var n=e.open,t=e.onDeny,o=e.onConfirm,l=e.title,b=e.dialogTitle,k=r.useState(!1),Z=(0,i.Z)(k,2),j=Z[0],g=Z[1];return(0,S.jsxs)(s.Z,{TransitionComponent:p,open:n,onClose:function(){return t(!1)},children:[(0,S.jsx)(c.Z,{children:(0,S.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:h.F3.SEMI_BOLD},id:"alert-dialog-title",children:b})}),(0,S.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,x.ZP)("".concat(l))}),(0,S.jsxs)(m.Z,{sx:{pb:5,px:6},children:[(0,S.jsx)(a.Z,{variant:"outlined",sx:{fontWeight:h.F3.MEDIUM,mr:4},onClick:function(){return t(!1)},color:"secondary",children:(0,S.jsx)(u.Z,{id:"common.no"})}),(0,S.jsx)(v.M,{isSubmitting:j,onClick:function(){g(!0),o().finally((function(){g(!1),t(!1)}))},text:"Lanjutkan"})]})]})}},33187:function(e,n,t){var i=t(1413),o=(t(47313),t(19860)),r=t(24813),a=t(94469),u=t(33604),l=t(46417);n.Z=function(e){var n=(0,o.Z)(),t=(0,r.Z)(n.breakpoints.down("sm"));return(0,l.jsxs)(a.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,fullScreen:t,maxWidth:"sm"},e),{},{children:[e.title&&(0,l.jsx)(u.Z,{children:e.title}),e.children]}))}},56417:function(e,n,t){t.d(n,{O:function(){return r}});var i=t(15671),o=t(43144),r=function(){function e(n,t,o){(0,i.Z)(this,e),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=n,this._onSaveSuccess=t.onSaveSuccess,this._onSaveFailed=t.onSaveFailed,this._onBeforeSubmit=null===o||void 0===o?void 0:o.onBeforeSubmit}return(0,o.Z)(e,[{key:"submitToServer",value:function(e){return this._onBeforeSubmit&&(e=this._onBeforeSubmit(e)),e.id?this.repository.update(e):this.repository.create(e)}},{key:"onSubmit",value:function(e,n,t){var i=this,o=n.setSubmitting,r=n.resetForm;o(!0),this.submitToServer(e).then((function(e){e.status?(!0===t&&r(),i._onSaveSuccess&&i._onSaveSuccess(e.item)):i._onSaveFailed&&i._onSaveFailed(),o(!1)}))}}]),e}()}}]);