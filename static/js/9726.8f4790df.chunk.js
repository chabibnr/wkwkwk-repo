"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[9726],{91011:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var r,i,o=n(29439),s=n(47313),a=n(65476),u=n(97890),c=n(16330),l=n(94614),d=n(57829),f=n(71003),h=n(57775),v=n(51057),m=n(57227),p=n(11579),g=n(4942),E=n(69625),b=n(6961),y=n(47605),w=n(51885),T=n(24929),k=n(75429),I=n(44894),S=n(20791),M=n(33187),L=n(93433),A=n(15861),R=n(15671),x=n(43144),Z=n(37762),C=n(87757),P=n.n(C),j=Object.create,O=Object.defineProperty,D=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,U=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty,_=(r=function(e,t){var r,i;r=e,i=function(e){var t,n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,i=2*r,o=new WeakMap,s=function(e,t){return function(o){var s=t.get(o),a=void 0===s?o.size:s<i?s+1:0;if(!o.has(a))return e(o,a);if(o.size<r){for(;o.has(a);)a=Math.floor(Math.random()*i);return e(o,a)}if(o.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;o.has(a);)a=Math.floor(Math.random()*n);return e(o,a)}}((t=o,function(e,n){return t.set(e,n),n}),o),a=function(e){return function(t){var n=e(t);return t.add(n),n}}(s);e.addUniqueNumber=a,e.generateUniqueNumber=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&"undefined"!=typeof t?i(e):"function"==typeof define&&n.amdO?define(["exports"],i):i((r="undefined"!=typeof globalThis?globalThis:r||self).fastUniqueNumbers={})},function(){return i||r((i={exports:{}}).exports,i),i.exports});var V=function(e){return function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t){var r,i=(0,Z.Z)(N(t));try{var o=function(){var i=r.value;!G.call(e,i)&&"default"!==i&&O(e,i,{get:function(){return t[i]},enumerable:!(n=D(t,i))||n.enumerable})};for(i.s();!(r=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}return e}(function(e){return O(e,"__esModule",{value:!0})}(O(null!=e?j(U(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)}(_()),q=null,z=(function(e,t){}((function(e){var t=new Map([[0,function(){}]]),n=new Map([[0,function(){}]]),r=new Map,i=new Worker(e);return i.addEventListener("message",(function(e){var i=e.data;if(function(e){return void 0!==e.method&&"call"===e.method}(i)){var o=i.params,s=o.timerId,a=o.timerType;if("interval"===a){var u=t.get(s);if("number"==typeof u){var c=r.get(u);if(void 0===c||c.timerId!==s||c.timerType!==a)throw new Error("The timer is in an undefined state.")}else{if("undefined"==typeof u)throw new Error("The timer is in an undefined state.");u()}}else if("timeout"===a){var l=n.get(s);if("number"==typeof l){var d=r.get(l);if(void 0===d||d.timerId!==s||d.timerType!==a)throw new Error("The timer is in an undefined state.")}else{if("undefined"==typeof l)throw new Error("The timer is in an undefined state.");l(),n.delete(s)}}}else{if(!function(e){return null===e.error&&"number"==typeof e.id}(i)){var f=i.error.message;throw new Error(f)}var h=i.id,v=r.get(h);if(void 0===v)throw new Error("The timer is in an undefined state.");var m=v.timerId,p=v.timerType;r.delete(h),"interval"===p?t.delete(m):n.delete(m)}})),{clearInterval:function(e){var n=(0,V.generateUniqueNumber)(r);r.set(n,{timerId:e,timerType:"interval"}),t.set(e,n),i.postMessage({id:n,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:function(e){var t=(0,V.generateUniqueNumber)(r);r.set(t,{timerId:e,timerType:"timeout"}),n.set(e,t),i.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:function(e,n){var r=(0,V.generateUniqueNumber)(t);return t.set(r,(function(){e(),"function"==typeof t.get(r)&&i.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:r,timerType:"interval"}})})),i.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:r,timerType:"interval"}}),r},setTimeout:function(e,t){var r=(0,V.generateUniqueNumber)(n);return n.set(r,e),i.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:r,timerType:"timeout"}}),r}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'),"object"==("undefined"==typeof window?"undefined":typeof window)),W={setTimeout:z?setTimeout.bind(window):setTimeout,clearTimeout:z?clearTimeout.bind(window):clearTimeout,setInterval:z?setInterval.bind(window):setInterval,clearInterval:z?clearInterval.bind(window):clearInterval};function F(e){W.setTimeout=e.setTimeout,W.clearTimeout=e.clearTimeout,W.setInterval=e.setInterval,W.clearInterval=e.clearInterval}var J,Y,B={},X=function(){function e(t){(0,R.Z)(this,e),this.closed=!1,this.mc=new MessageChannel,this.name=t,B[t]=B[t]||[],B[t].push(this),this.mc.port1.start(),this.mc.port2.start(),this.onStorage=this.onStorage.bind(this),window.addEventListener("storage",this.onStorage)}return(0,x.Z)(e,[{key:"onStorage",value:function(e){if(e.storageArea===window.localStorage&&e.key.substring(0,this.name.length)===this.name&&null!==e.newValue){var t=JSON.parse(e.newValue);this.mc.port2.postMessage(t)}}},{key:"postMessage",value:function(e){var t=this;if(this.closed)throw new Error("InvalidStateError");var n=JSON.stringify(e),r="".concat(this.name,":").concat(String(Date.now())).concat(String(Math.random()));window.localStorage.setItem(r,n),W.setTimeout((function(){window.localStorage.removeItem(r)}),500),B[this.name].forEach((function(e){e!==t&&e.mc.port2.postMessage(JSON.parse(n))}))}},{key:"close",value:function(){if(!this.closed){this.closed=!0,this.mc.port1.close(),this.mc.port2.close(),window.removeEventListener("storage",this.onStorage);var e=B[this.name].indexOf(this);B[this.name].splice(e,1)}}},{key:"onmessage",get:function(){return this.mc.port1.onmessage},set:function(e){this.mc.port1.onmessage=e}},{key:"onmessageerror",get:function(){return this.mc.port1.onmessageerror},set:function(e){this.mc.port1.onmessageerror=e}},{key:"addEventListener",value:function(e,t){return this.mc.port1.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){return this.mc.port1.removeEventListener(e,t)}},{key:"dispatchEvent",value:function(e){return this.mc.port1.dispatchEvent(e)}}]),e}(),Q="undefined"==typeof window?void 0:"function"==typeof window.BroadcastChannel?window.BroadcastChannel:X;function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return W.setTimeout(t,e)}))}function H(){return Math.random().toString(36).substring(2)}(Y=J||(J={}))[Y.APPLY=0]="APPLY",Y[Y.TELL=1]="TELL",Y[Y.CLOSE=2]="CLOSE",Y[Y.REGISTER=3]="REGISTER",Y[Y.DEREGISTER=4]="DEREGISTER",Y[Y.IDLE=5]="IDLE",Y[Y.ACTIVE=6]="ACTIVE",Y[Y.PROMPT=7]="PROMPT",Y[Y.START=8]="START",Y[Y.RESET=9]="RESET",Y[Y.ACTIVATE=10]="ACTIVATE",Y[Y.PAUSE=11]="PAUSE",Y[Y.RESUME=12]="RESUME",Y[Y.MESSAGE=13]="MESSAGE";var $,ee,te=function(){function e(t,n){(0,R.Z)(this,e),this.token=H(),this.isLeader=!1,this.isDead=!1,this.isApplying=!1,this.reApply=!1,this.intervals=[],this.listeners=[],this.channel=t,this.options=n,this.apply=this.apply.bind(this),this.awaitLeadership=this.awaitLeadership.bind(this),this.sendAction=this.sendAction.bind(this)}return(0,x.Z)(e,[{key:"apply",value:function(){var e=(0,A.Z)(P().mark((function e(){var t,n,r=this;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLeader&&!this.isDead){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.isApplying){e.next=4;break}return e.abrupt("return",(this.reApply=!0,!1));case 4:return this.isApplying=!0,t=!1,n=function(e){var n=e.data,i=n.token,o=n.action;i!==r.token&&(o===J.APPLY&&i>r.token&&(t=!0),o===J.TELL&&(t=!0))},this.channel.addEventListener("message",n),e.prev=7,this.sendAction(J.APPLY),e.next=11,K(this.options.responseTime);case 11:return this.channel.removeEventListener("message",n),this.isApplying=!1,e.abrupt("return",t?!!this.reApply&&this.apply():(this.assumeLead(),!0));case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"awaitLeadership",value:function(){var e=this;if(this.isLeader)return Promise.resolve();var t=!1,n=null;return new Promise((function(r){var i=function(){if(!t){t=!0,W.clearInterval(n);var i=e.intervals.indexOf(n);e.intervals.splice(i,1),e.channel.removeEventListener("message",o),r()}};n=W.setInterval((function(){e.apply().then((function(){e.isLeader&&i()}))}),e.options.fallbackInterval),e.intervals.push(n);var o=function(t){t.data.action===J.CLOSE&&e.apply().then((function(){e.isLeader&&i()}))};e.channel.addEventListener("message",o)}))}},{key:"sendAction",value:function(e){this.channel.postMessage({action:e,token:this.token})}},{key:"assumeLead",value:function(){var e=this;this.isLeader=!0;var t=function(t){t.data.action===J.APPLY&&e.sendAction(J.TELL)};return this.channel.addEventListener("message",t),this.listeners.push(t),this.sendAction(J.TELL)}},{key:"waitForLeadership",value:function(){return this.deferred||(this.deferred=this.awaitLeadership()),this.deferred}},{key:"close",value:function(){var e=this;this.isDead||(this.isDead=!0,this.isLeader=!1,this.sendAction(J.CLOSE),this.listeners.forEach((function(t){return e.channel.removeEventListener("message",t)})),this.intervals.forEach((function(e){return W.clearInterval(e)})))}}]),e}();(ee=$||($={}))[ee.PROMPTED=0]="PROMPTED",ee[ee.ACTIVE=1]="ACTIVE",ee[ee.IDLE=2]="IDLE";var ne=function(){function e(t){var n=this;(0,R.Z)(this,e),this.token=H(),this.registry=new Map,this.allIdle=!1;var r=t.channelName;if(this.options=t,this.channel=new Q(r),this.registry.set(this.token,1),t.leaderElection){this.elector=new te(this.channel,{fallbackInterval:2e3,responseTime:100}),this.elector.waitForLeadership()}this.channel.addEventListener("message",(function(e){var t=e.data,r=t.action,i=t.token,o=t.data;switch(r){case J.REGISTER:n.registry.set(i,2);break;case J.DEREGISTER:n.registry.delete(i);break;case J.IDLE:n.idle(i);break;case J.ACTIVE:n.active(i);break;case J.PROMPT:n.prompt(i);break;case J.START:n.start(i);break;case J.RESET:n.reset(i);break;case J.ACTIVATE:n.activate(i);break;case J.PAUSE:n.pause(i);break;case J.RESUME:n.resume(i);break;case J.MESSAGE:n.options.onMessage(o)}})),this.send(J.REGISTER)}return(0,x.Z)(e,[{key:"isLeader",get:function(){if(!this.elector)throw new Error('\u274c Leader election is not enabled. To Enable it set the "leaderElection" property to true.');return this.elector.isLeader}},{key:"prompt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;this.registry.set(e,0);var t=(0,L.Z)(this.registry.values()).every((function(e){return 0===e}));e===this.token&&this.send(J.PROMPT),t&&this.options.onPrompt()}},{key:"idle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;this.registry.set(e,2);var t=(0,L.Z)(this.registry.values()).every((function(e){return 2===e}));e===this.token&&this.send(J.IDLE),!this.allIdle&&t&&(this.allIdle=!0,this.options.onIdle())}},{key:"active",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;this.allIdle=!1,this.registry.set(e,1);var t=(0,L.Z)(this.registry.values()).some((function(e){return 1===e}));e===this.token&&this.send(J.ACTIVE),t&&this.options.onActive()}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;this.allIdle=!1,this.registry.set(e,1),e===this.token?this.send(J.START):this.options.start(!0)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;this.allIdle=!1,this.registry.set(e,1),e===this.token?this.send(J.RESET):this.options.reset(!0)}},{key:"activate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;this.allIdle=!1,this.registry.set(e,1),e===this.token?this.send(J.ACTIVATE):this.options.activate(!0)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;e===this.token?this.send(J.PAUSE):this.options.pause(!0)}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.token;e===this.token?this.send(J.RESUME):this.options.resume(!0)}},{key:"message",value:function(e){try{this.channel.postMessage({action:J.MESSAGE,token:this.token,data:e})}catch(t){}}},{key:"send",value:function(e){try{this.channel.postMessage({action:e,token:this.token})}catch(t){}}},{key:"close",value:function(){this.options.leaderElection&&this.elector.close(),this.send(J.DEREGISTER),this.channel.close()}}]),e}(),re=z?document:null,ie=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange"];function oe(e){var t=(0,s.useRef)(e);return(0,s.useEffect)((function(){t.current=e}),[e]),t}function se(e,t){var n;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){e.apply(void 0,i),n=null}),t)}return r.cancel=function(){clearTimeout(n)},r}function ae(e,t){var n=0;return function(){var r=(new Date).getTime();if(!(r-n<t))return n=r,e.apply(void 0,arguments)}}var ue=function(){return z?performance.now():Date.now()};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout,n=void 0===t?12e5:t,r=e.promptTimeout,i=void 0===r?0:r,o=e.element,a=void 0===o?re:o,u=e.events,c=void 0===u?ie:u,l=e.timers,d=void 0===l?void 0:l,f=e.immediateEvents,h=void 0===f?[]:f,v=e.onPrompt,m=void 0===v?function(){}:v,p=e.onIdle,g=void 0===p?function(){}:p,E=e.onActive,b=void 0===E?function(){}:E,y=e.onAction,w=void 0===y?function(){}:y,T=e.onMessage,k=void 0===T?function(){}:T,I=e.debounce,S=void 0===I?0:I,M=e.throttle,A=void 0===M?0:M,R=e.eventsThrottle,x=void 0===R?200:R,Z=e.startOnMount,C=void 0===Z||Z,P=e.startManually,j=void 0!==P&&P,O=e.stopOnIdle,D=void 0!==O&&O,N=e.crossTab,U=void 0!==N&&N,G=e.name,_=void 0===G?"idle-timer":G,V=e.syncTimers,q=void 0===V?0:V,J=e.leaderElection,Y=void 0!==J&&J,B=(0,s.useRef)(ue()),X=(0,s.useRef)(Date.now()),Q=(0,s.useRef)(ue()),K=(0,s.useRef)(null),H=(0,s.useRef)(null),$=(0,s.useRef)(0),ee=(0,s.useRef)(!0),te=(0,s.useRef)(!1),ce=(0,s.useRef)(!0),le=(0,s.useRef)(!1),de=(0,s.useRef)(!1),fe=(0,s.useRef)(0),he=(0,s.useRef)(0),ve=(0,s.useRef)(null),me=(0,s.useRef)(null),pe=oe(n),ge=oe(i),Ee=oe(D),be=(0,s.useRef)(h),ye=(0,s.useRef)(a),we=(0,s.useRef)((0,L.Z)(new Set([].concat((0,L.Z)(c),(0,L.Z)(h))).values())),Te=oe(g),ke=oe(b),Ie=oe(m),Se=oe(k),Me=(0,s.useRef)();(0,s.useEffect)((function(){Me.current&&Me.current.cancel&&Me.current.cancel(),Me.current=S>0?se(w,S):A>0?ae(w,A):w}),[w,A,S]);var Le=(0,s.useRef)();(0,s.useEffect)((function(){U&&q&&(Le.current=ae((function(){me.current.active()}),q))}),[U,q]);var Ae=function(){null!==ve.current&&(W.clearTimeout(ve.current),ve.current=null)},Re=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ae(),ve.current=W.setTimeout(Pe,e||pe.current),t&&(H.current=ue())},xe=function(e){fe.current=0,he.current=ue(),de.current=!0,Re(ge.current,!1),Ie.current(e)},Ze=function(){Ae(),ee.current=!0,K.current=ue(),Ee.current?Ne():de.current&&(he.current=0,de.current=!1),Te.current()},Ce=function(e){Ae(),de.current=!1,he.current=0,ee.current=!1,$.current+=ue()-K.current,De(),Re(),ke.current(e)},Pe=function(e){if(!ee.current)return Me.current.cancel&&Me.current.cancel(),ge.current>0&&!de.current?void(me.current?me.current.prompt():xe(e)):void(me.current?me.current.idle():Ze());me.current?me.current.active():Ce(e)},je=function(e){if(Me.current(e),!de.current)if(Ae(),ee.current||!be.current.includes(e.type)){var t=ue()-H.current;ee.current&&!D||!ee.current&&t>pe.current?Pe(e):(te.current=!1,fe.current=0,he.current=0,Re(),U&&q&&Le.current())}else Pe(e)},Oe=(0,s.useRef)();(0,s.useEffect)((function(){var e=le.current;e&&Ne(),Oe.current=x>0?ae(je,x):je,e&&De()}),[x,U,q]);var De=function(){!z||le.current||(we.current.forEach((function(e){ye.current.addEventListener(e,Oe.current,{capture:!0,passive:!0})})),le.current=!0)},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!z||(le.current||e)&&(we.current.forEach((function(e){ye.current.removeEventListener(e,Oe.current,{capture:!0})})),le.current=!1)},Ue=(0,s.useCallback)((function(e){Ae(),De(),ee.current=!1,de.current=!1,te.current=!1,fe.current=0,he.current=0,me.current&&!e&&me.current.start(),Re()}),[ve,ee,pe,me]),Ge=(0,s.useCallback)((function(e){Ae(),De(),ee.current=!1,de.current=!1,te.current=!1,fe.current=0,he.current=0,B.current=ue(),Q.current=ue(),me.current&&!e&&me.current.reset(),j||Re()}),[ve,ee,pe,j,me]),_e=(0,s.useCallback)((function(e){Ae(),De(),(ee.current||de.current)&&Ce(),ee.current=!1,de.current=!1,te.current=!1,fe.current=0,he.current=0,Q.current=ue(),me.current&&!e&&me.current.activate(),Re()}),[ve,ee,pe,me]),Ve=(0,s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!te.current&&(fe.current=Be(),te.current=!0,Ne(),Ae(),me.current&&!e&&me.current.pause(),!0)}),[ve,me]),qe=(0,s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!te.current&&(te.current=!1,de.current||De(),ee.current||Re(fe.current),he.current&&(he.current=ue()),me.current&&!e&&me.current.resume(),!0)}),[ve,pe,fe,me]),ze=(0,s.useCallback)((function(e,t){me.current?(t&&Se.current(e),me.current.message(e)):t&&Se.current(e)}),[k]),We=(0,s.useCallback)((function(){return ee.current}),[ee]),Fe=(0,s.useCallback)((function(){return de.current}),[de]),Je=(0,s.useCallback)((function(){if(!me.current)throw new Error('\u274c Cross Tab feature is not enabled. To enable it set the "crossTab" property to true.');return me.current.isLeader}),[me]),Ye=(0,s.useCallback)((function(){if(!me.current)throw new Error('\u274c Cross Tab feature is not enabled. To enable it set the "crossTab" property to true.');return me.current.token}),[me]),Be=(0,s.useCallback)((function(){if(te.current)return fe.current;var e=fe.current?fe.current:ge.current+pe.current,t=H.current?ue()-H.current:0,n=Math.ceil(e-t);return n<0?0:Math.abs(n)}),[pe,ge,de,fe,H]),Xe=(0,s.useCallback)((function(){return Math.round(ue()-Q.current)}),[Q]),Qe=(0,s.useCallback)((function(){return Math.round(ue()-B.current)}),[B]),Ke=(0,s.useCallback)((function(){return K.current?new Date(X.current-B.current+K.current):null}),[K]),He=(0,s.useCallback)((function(){return H.current?new Date(X.current-B.current+H.current):null}),[H]),$e=(0,s.useCallback)((function(){return ee.current?Math.round(ue()-K.current+$.current):Math.round($.current)}),[K,$]),et=(0,s.useCallback)((function(){var e=Math.round(Qe()-$e());return e>=0?e:0}),[B,K,$]);return(0,s.useEffect)((function(){if(S>0&&A>0)throw new Error("\u274c onAction can either be throttled or debounced, not both.");d&&F(d);var e=function(){me.current&&me.current.close(),Me.current.cancel&&Me.current.cancel(),Ae(),Ne(!0)};return z&&window.addEventListener("beforeunload",e),function(){z&&window.removeEventListener("beforeunload",e),me.current&&me.current.close(),Me.current.cancel&&Me.current.cancel(),Ae(),Ne(!0)}}),[]),(0,s.useEffect)((function(){me.current&&me.current.close(),me.current=U?new ne({channelName:_,leaderElection:Y,onPrompt:function(){xe()},onIdle:function(){Ze()},onActive:function(){Ce()},onMessage:Se.current,start:Ue,reset:Ge,activate:_e,pause:Ve,resume:qe}):null}),[U,_,Y,Ie,Te,ke,Se,Ue,Ge,Ve,qe]),(0,s.useEffect)((function(){Ae(),Ne(!0),ce.current||(te.current=!0,ee.current=!0,fe.current=0),!j&&(C?Ue():De())}),[j,C,ce]),(0,s.useEffect)((function(){if(!ce.current){var e=(0,L.Z)(new Set([].concat((0,L.Z)(c),(0,L.Z)(h))).values());if(Ne(),we.current=e,ye.current=a,be.current=h,j)return;C?Ue():De()}}),[a,JSON.stringify(c),JSON.stringify(h),ce,j,C]),(0,s.useEffect)((function(){if(ce.current)ce.current=!1;else{if(pe.current=n,j)return;ee.current&&(ke.current(),me.current&&me.current.active()),Ue()}}),[n,me,j,ce,ee]),{message:ze,start:Ue,reset:Ge,activate:_e,pause:Ve,resume:qe,isIdle:We,isPrompted:Fe,isLeader:Je,getTabId:Ye,getRemainingTime:Be,getElapsedTime:Xe,getTotalElapsedTime:Qe,getLastIdleTime:Ke,getLastActiveTime:He,getTotalIdleTime:$e,getTotalActiveTime:et}}var le=(0,s.createContext)(null);le.Consumer;var de=n(69737),fe=n(88913),he=n(46417),ve=function(e){var t=e.model,n=e.onClose,r=(0,de.f)().user,i=s.useState(!1),u=(0,o.Z)(i,2),l=u[0],f=u[1],h=s.useState(!1),v=(0,o.Z)(h,2),m=v[0],p=v[1],L=s.useState(3),A=(0,o.Z)(L,2),R=A[0],x=A[1],Z=s.useRef(0),C=s.useRef(),P=ce({timeout:15e3,onIdle:function(){f(!0),G(),console.log("user is idle"),console.log("last active",O())},onActive:function(e){f(!1),U(),console.log("start timer from ",Z.current),console.log("user is active",e),console.log("time remaining",j())},onAction:function(e){console.log("user did something",e)},debounce:500}),j=P.getTotalActiveTime,O=P.getLastActiveTime;s.useLayoutEffect((function(){D()}),[]);var D=function(){Z.current=0,U()},N=function(){_(),n()},U=function(){C.current=setInterval((function(){Z.current+=1}),1e3)},G=function(){clearInterval(C.current)},_=function(){G(),Z.current=0};return(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)(M.Z,{sx:l?(0,g.Z)({},"& > .MuiDialog-container",{opacity:"0.05 !important"}):{},BackdropProps:{style:{backgroundColor:l?"rgba(0,0,0,1)":"rgba(0,0,0,.7)"}},disableEscapeKeyDown:!0,onClose:function(){},"aria-labelledby":"customized-dialog-title",open:!0,maxWidth:"lg",children:[(0,he.jsxs)(E.Z,{dividers:!0,sx:(0,g.Z)({padding:function(e){return e.spacing(2)}},"& iframe.doc-viewer",{width:"100% !important"}),children:[(0,he.jsx)(d.Z,{textAlign:"center",fontSize:"1.4993rem",mb:5,children:t.name}),(0,he.jsx)(d.Z,{className:"reading-mode-content",children:(0,a.ZP)("".concat(t.content))})]}),(0,he.jsx)(b.Z,{sx:{margin:0,padding:function(e){return e.spacing(2)},background:T.Z[200]},children:(0,he.jsxs)(d.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,he.jsx)(d.Z,{component:"fieldset",borderColor:"transparent",children:(0,he.jsxs)(d.Z,{component:"fieldset",borderColor:"transparent",children:[(0,he.jsx)(y.Z,{component:"legend",children:"Tingkat Pemahaman?"}),(0,he.jsx)(w.Z,{onChange:function(e,t){x(null!==t&&void 0!==t?t:3)}})]})}),(0,he.jsx)(d.Z,{ml:"auto",children:(0,he.jsx)(S.M,{isSubmitting:m,onClick:function(){if(r&&(0,fe.P)(I.lg.Student,r.role)){var e=new k.b;e.studentId=r.uid,e.topicId=t.id,e.feedback=R,e.readDuration=Z.current,p(!0),c.mu.create(e).then((function(){p(!1),N()}))}else N()},text:"Selesai Membaca"})})]})})]})})},me=n(54381),pe=n(22855),ge=function(e){e.model;var t,n,r,i,g=(0,u.UO)().topicId,E=((0,u.s0)(),(0,de.f)().user),b=s.useState(!1),y=(0,o.Z)(b,2),w=y[0],T=y[1],k=(0,p.useQuery)(["view-topic",g],(function(){return c.Xv.view(null!==g&&void 0!==g?g:"")})),S=k.isLoading,M=k.data,L=(0,fe.P)([I.lg.Teacher],null!==(t=null===E||void 0===E?void 0:E.role)&&void 0!==t?t:[]);return S?(0,he.jsx)(m.Z,{sx:{height:"100vh"},children:(0,he.jsx)(l.QP,{})}):(0,he.jsxs)(he.Fragment,{children:[!(null!==M&&void 0!==M&&null!==(n=M.item)&&void 0!==n&&n.getIsPublish())&&(0,he.jsx)(d.Z,{mb:4,children:(0,he.jsxs)(me.Z,{color:"error",severity:"warning",action:(0,he.jsx)(f.Z,{children:"Publikasikan"}),children:[(0,he.jsx)(pe.Z,{children:"Artikel belum dipublikasikan"}),"Artikel ini belum dipublikasikan dan belum dapat dibaca oleh Siswa."]})}),(0,he.jsx)(h.Z,{children:(0,he.jsxs)(v.Z,{sx:L?{}:{height:200,position:"relative","&::after":{height:50,content:'""',background:" linear-gradient(0deg, rgba(187,187,187,1) 0%, rgba(255,255,255,0.05926120448179273) 100%)",position:"absolute",left:0,bottom:0,right:0}},children:[(0,he.jsx)(d.Z,{sx:{position:"absolute",bottom:20,display:L?"none":"block",left:0,right:0,zIndex:99,textAlign:"center"},children:(0,he.jsx)(f.Z,{sx:{width:250},variant:"contained",onClick:function(){T(!0)},children:"Baca Selengkapnya"})}),(0,a.ZP)(null!==(r=null===M||void 0===M||null===(i=M.item)||void 0===i?void 0:i.content)&&void 0!==r?r:"")]})}),w&&(0,he.jsx)(ve,{model:null===M||void 0===M?void 0:M.item,openReadingMode:function(){T(!0)},onClose:function(){T(!1)}})]})}},33187:function(e,t,n){var r=n(1413),i=(n(47313),n(19860)),o=n(24813),s=n(94469),a=n(33604),u=n(46417);t.Z=function(e){var t=(0,i.Z)(),n=(0,o.Z)(t.breakpoints.down("sm"));return(0,u.jsxs)(s.Z,(0,r.Z)((0,r.Z)({fullWidth:!0,fullScreen:n,maxWidth:"sm"},e),{},{children:[e.title&&(0,u.jsx)(a.Z,{children:e.title}),e.children]}))}},20791:function(e,t,n){n.d(t,{M:function(){return a}});n(47313);var r=n(57829),i=n(71003),o=n(98668),s=n(46417),a=function(e){var t=e.isSubmitting,n=e.disabled,a=void 0!==n&&n,u=e.color,c=void 0===u?"primary":u,l=e.variant,d=void 0===l?"outlined":l,f=e.className,h=void 0===f?"":f,v=e.fullWidth,m=void 0!==v&&v,p=e.text,g=e.onClick;return(0,s.jsxs)(r.Z,{sx:{position:"relative",display:m?"block":"inline-block"},children:[(0,s.jsx)(i.Z,{type:"submit",onClick:g,color:c,variant:d,disabled:t||a,className:h,fullWidth:m,children:p}),t&&(0,s.jsx)(o.Z,{size:20,style:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})]})}}}]);