"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[557],{28892:function(n,e,t){t.r(e),t.d(e,{default:function(){return T}});var i=t(1413),o=t(29439),a=t(47313),r=t(92649),s=t(71003),u=t(69625),l=t(57775),c=t(40490),d=t.n(c),f=t(16330),m=t(20466),h=t(67375),v=t(1084),S=t(2682),p=t(33187),x=t(7410),b=t(3463),Z=t(57829),g=t(6961),j=t(20791),C=t(29417),k=t(56417),_=t(46417),y=b.Ry({name:b.Z_().required("Nama harus diisi"),codeName:b.Z_().required("Kode harus diisi")}),F=function(n){var e=new k.O(f.E7,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(x.J9,{initialValues:n.model,validationSchema:y,onSubmit:function(n,t){return e.onSubmit(n,t)},children:function(e){var t=e.isSubmitting;return(0,_.jsxs)(x.l0,{children:[(0,_.jsx)(Z.Z,{mb:4,children:(0,_.jsx)(C.nv,{name:"name",variant:"filled",placeholder:"Nama",label:"Nama"})}),(0,_.jsx)(Z.Z,{mb:4,children:(0,_.jsx)(C.nv,{name:"codeName",variant:"filled",placeholder:"Kode",label:"Kode"})}),(0,_.jsx)(Z.Z,{mt:4,children:(0,_.jsxs)(g.Z,{children:[(0,_.jsx)(s.Z,{color:"secondary",onClick:n.onCancel,disabled:t,variant:"text",disableElevation:!0,children:"Batal"}),(0,_.jsx)(j.M,{isSubmitting:t,text:"Simpan"})]})})]})}})})},J=t(14997),T=function(){var n=(0,a.useState)(null),e=(0,o.Z)(n,2),t=e[0],c=e[1],x=(0,v.I0)(),b=a.useRef(),Z=a.useCallback((function(n,e){n.formMode=e,c(n)}),[]),g=a.useCallback((function(n){x((0,h.PV)("Jurusan berhasil disimpan")),b.current.onQueryChange(),C()}),[]),j=a.useCallback((function(){x((0,h.Tl)("Jurusan gagal disimpan"))}),[]),C=a.useCallback((function(){c(null)}),[]),k=a.useCallback((function(){return f.E7.remove(t).then((function(n){n.status?(b.current.onQueryChange(),x((0,h.PV)("Jurusan telah dihapus"))):x((0,h.Tl)("Jurusan gagal dihapus"))}))}),[t]);return(0,_.jsxs)(r.Z,{title:"Pengaturan Jurusan",toolbar:(0,_.jsx)(s.Z,{variant:"contained",onClick:function(){return c(new m.y4)},children:"Tambah Jurusan"}),children:[t&&("create"==t.formMode||"edit"==t.formMode)&&(0,_.jsx)(p.Z,{open:!0,title:t.isNewRecord?"Tambah Jurusan":"Perbarui Jurusan",children:(0,_.jsx)(u.Z,{children:(0,_.jsx)(F,{model:t,onCancel:C,onSaveFailed:j,onSaveSuccess:g})})}),t&&"delete"==t.formMode&&(0,_.jsx)(J.Z,{open:!0,onDeny:C,onConfirm:k,dialogTitle:"Hapus Jurusan",title:"Yakin ingin menghapus Jurusan <strong>".concat(t.name,"</strong> ?")}),(0,_.jsx)(d(),{title:"",tableRef:b,components:{Toolbar:function(){return(0,_.jsx)(_.Fragment,{})},Container:function(n){return(0,_.jsx)(l.Z,(0,i.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(n){return new Promise((function(e,t){f.E7.findAll({page:n.page+1}).then((function(n){n.status?e({data:n.items,page:n.page-1,totalCount:n.totalCount}):e({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Name",field:"name"},{title:"Kode",field:"codeName"},{title:"Dibuat",field:"createdAt",render:function(n){return(0,S.ss)(n.createdAt,"LL")}},{title:"Diperbarui",field:"updatedAt",render:function(n){return(0,S.ss)(n.updatedAt,"LL")}}],actions:[{icon:"create",tooltip:"Edit Jurusan",onClick:function(n,e){e instanceof m.y4&&Z(e,"edit"),x((0,h.SR)())}},{icon:"delete",tooltip:"Hapus Jurusan",iconProps:{color:"error"},onClick:function(n,e){e instanceof m.y4&&Z(e,"delete")}}]})]})}},14997:function(n,e,t){var i=t(29439),o=t(1413),a=t(47313),r=t(71003),s=t(1001),u=t(50301),l=t(94469),c=t(33604),d=t(47605),f=t(69625),m=t(6961),h=t(69680),v=t(20791),S=t(65476),p=t(46417),x=a.forwardRef((function(n,e){return(0,p.jsx)(u.Z,(0,o.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,t=n.onDeny,o=n.onConfirm,u=n.title,b=n.dialogTitle,Z=a.useState(!1),g=(0,i.Z)(Z,2),j=g[0],C=g[1];return(0,p.jsxs)(l.Z,{TransitionComponent:x,open:e,onClose:function(){return t(!1)},children:[(0,p.jsx)(c.Z,{children:(0,p.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:h.F3.SEMI_BOLD},id:"alert-dialog-title",children:b})}),(0,p.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,S.ZP)("".concat(u))}),(0,p.jsxs)(m.Z,{sx:{pb:5,px:6},children:[(0,p.jsx)(r.Z,{variant:"outlined",sx:{fontWeight:h.F3.MEDIUM,mr:4},onClick:function(){return t(!1)},color:"secondary",children:(0,p.jsx)(s.Z,{id:"common.no"})}),(0,p.jsx)(v.M,{isSubmitting:j,onClick:function(){C(!0),o().finally((function(){C(!1),t(!1)}))},text:"Lanjutkan"})]})]})}},33187:function(n,e,t){var i=t(1413),o=(t(47313),t(19860)),a=t(24813),r=t(94469),s=t(33604),u=t(46417);e.Z=function(n){var e=(0,o.Z)(),t=(0,a.Z)(e.breakpoints.down("sm"));return(0,u.jsxs)(r.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,fullScreen:t,maxWidth:"sm"},n),{},{children:[n.title&&(0,u.jsx)(s.Z,{children:n.title}),n.children]}))}},56417:function(n,e,t){t.d(e,{O:function(){return a}});var i=t(15671),o=t(43144),a=function(){function n(e,t,o){(0,i.Z)(this,n),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=e,this._onSaveSuccess=t.onSaveSuccess,this._onSaveFailed=t.onSaveFailed,this._onBeforeSubmit=null===o||void 0===o?void 0:o.onBeforeSubmit}return(0,o.Z)(n,[{key:"submitToServer",value:function(n){return this._onBeforeSubmit&&(n=this._onBeforeSubmit(n)),n.id?this.repository.update(n):this.repository.create(n)}},{key:"onSubmit",value:function(n,e,t){var i=this,o=e.setSubmitting,a=e.resetForm;o(!0),this.submitToServer(n).then((function(n){n.status?(!0===t&&a(),i._onSaveSuccess&&i._onSaveSuccess(n.item)):i._onSaveFailed&&i._onSaveFailed(),o(!1)}))}}]),n}()}}]);