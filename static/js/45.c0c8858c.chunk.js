"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[45],{79302:function(n,e,a){a.r(e),a.d(e,{default:function(){return E}});var i=a(1413),t=a(29439),r=a(47313),l=a(92649),o=a(71003),c=a(69625),u=a(57775),s=a(40490),d=a.n(s),f=a(16330),m=a(20466),h=a(67375),g=a(1084),p=a(33187),x=a(7410),v=a(3463),Z=a(57829),j=a(6961),b=a(20791),S=a(29417),C=a(56417),R=a(97741),k=a(46417),K=function(n){var e=r.useState([]),a=(0,t.Z)(e,2),l=a[0],o=a[1];r.useEffect((function(){c()}),[]);var c=function(){f.E$.findAll({page:0}).then((function(n){var e;o(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,k.jsx)(S.Ph,(0,i.Z)((0,i.Z)({},n),{},{children:l.map((function(e,a){return(0,k.jsx)(R.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(a))}))}))},P=function(n){var e=r.useState([]),a=(0,t.Z)(e,2),l=a[0],o=a[1];r.useEffect((function(){c()}),[]);var c=function(){f.E7.findAll({page:0}).then((function(n){var e;o(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,k.jsx)(S.Ph,(0,i.Z)((0,i.Z)({},n),{},{children:l.map((function(e,a){return(0,k.jsx)(R.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(a))}))}))},y=a(65632),I=v.Ry({name:v.Z_().required("Nama kelas harus dipilih"),specialisationId:v.Z_().required("Guru Pengajar harus dipilih"),gradeId:v.Z_().required("Guru Pengajar harus dipilih"),guardianTeacherId:v.Z_().required("Guru Pengajar harus dipilih")}),T=function(n){var e=new C.O(f.nR,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(x.J9,{initialValues:n.model,validationSchema:I,onSubmit:function(n,a){return e.onSubmit(n,a)},children:function(e){var a=e.isSubmitting;return(0,k.jsxs)(x.l0,{children:[(0,k.jsx)(Z.Z,{mb:4,children:(0,k.jsx)(S.nv,{name:"name",variant:"filled",label:"Nama Kelas"})}),(0,k.jsx)(Z.Z,{mb:4,children:(0,k.jsx)(P,{fullWidth:!0,name:"specialisationId",label:"Jurusan",variant:"filled"})}),(0,k.jsx)(Z.Z,{mb:4,children:(0,k.jsx)(K,{fullWidth:!0,name:"gradeId",label:"Tingkatan",variant:"filled"})}),(0,k.jsx)(Z.Z,{mb:4,children:(0,k.jsx)(y.a,{variant:"filled",fullWidth:!0,name:"guardianTeacherId",label:"Wali Kelas"})}),(0,k.jsx)(Z.Z,{mt:4,children:(0,k.jsxs)(j.Z,{children:[(0,k.jsx)(o.Z,{color:"secondary",onClick:n.onCancel,disabled:a,variant:"text",disableElevation:!0,children:"Batal"}),(0,k.jsx)(b.M,{isSubmitting:a,text:"Simpan"})]})})]})}})})},w=a(14997),M=a(29466),E=function(){var n=(0,r.useState)(null),e=(0,t.Z)(n,2),a=e[0],s=e[1],x=(0,g.I0)(),v=r.useRef(),Z=r.useCallback((function(n,e){n.formMode=e,s(n)}),[]),j=r.useCallback((function(n){x((0,h.PV)("Ruang Kelas berhasil disimpan")),v.current.onQueryChange(),S()}),[]),b=r.useCallback((function(){x((0,h.Tl)("Ruang Kelas gagal disimpan"))}),[]),S=r.useCallback((function(){s(null)}),[]),C=r.useCallback((function(){return f.nR.remove(a).then((function(n){n.status?(v.current.onQueryChange(),x((0,h.PV)("Ruang Kelas telah dihapus"))):x((0,h.Tl)("Ruang Kelas gagal dihapus"))}))}),[a]);return(0,k.jsxs)(l.Z,{title:"Pengaturan Ruang Kelas",toolbar:(0,k.jsx)(o.Z,{variant:"contained",onClick:function(){return s(new m.rV)},children:"Tambah Ruang Kelas"}),children:[a&&("create"==a.formMode||"edit"==a.formMode)&&(0,k.jsx)(p.Z,{open:!0,title:a.isNewRecord?"Tambah Ruang Kelas":"Perbarui Ruang Kelas",children:(0,k.jsx)(c.Z,{children:(0,k.jsx)(T,{model:a,onCancel:S,onSaveFailed:b,onSaveSuccess:j})})}),a&&"delete"==a.formMode&&(0,k.jsx)(w.Z,{open:!0,onDeny:S,onConfirm:C,dialogTitle:"Hapus Ruang Kelas",title:"Yakin ingin menghapus Ruang Kelas <strong>".concat(a.name,"</strong> ?")}),(0,k.jsx)(d(),{title:"",tableRef:v,components:{Toolbar:function(){return(0,k.jsx)(k.Fragment,{})},Container:function(n){return(0,k.jsx)(u.Z,(0,i.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(n){return new Promise((function(e,a){f.nR.findAll({page:n.page+1}).then((function(n){n.status?e({data:n.items,page:n.page-1,totalCount:n.totalCount}):e({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Name",field:"name"},{title:"Tingkat",field:"gradeId",render:function(n){var e;return null===(e=n.grade)||void 0===e?void 0:e.name}},{title:"Specialisation",field:"specialisationId",render:function(n){var e;return null===(e=n.specialisation)||void 0===e?void 0:e.codeName}},{title:"Wali Kelas",render:function(n){var e;return null===(e=n.guardian)||void 0===e?void 0:e.getFullName()}},{title:"Siswa",align:"center",render:function(n){return(0,k.jsx)(o.Z,{component:M.rU,size:"small",variant:"text",color:"primary",to:"/setting/classroom/".concat(n.id,"/student"),children:"Siswa"})}},{title:"Pelajaran",align:"center",render:function(n){return(0,k.jsx)(o.Z,{component:M.rU,size:"small",variant:"text",color:"primary",to:"/setting/classroom/".concat(n.id,"/course"),children:"Mapel"})}}],actions:[{icon:"create",tooltip:"Edit Ruang Kelas",onClick:function(n,e){e instanceof m.rV&&Z(e,"edit"),x((0,h.SR)())}},{icon:"delete",tooltip:"Hapus Ruang Kelas",iconProps:{color:"error"},onClick:function(n,e){e instanceof m.rV&&Z(e,"delete")}}]})]})}},65632:function(n,e,a){a.d(e,{a:function(){return s}});var i=a(1413),t=a(29439),r=a(47313),l=a(29417),o=a(97741),c=a(16330),u=a(46417),s=function(n){var e=r.useState([]),a=(0,t.Z)(e,2),s=a[0],d=a[1],f=r.useRef();r.useEffect((function(){m()}),[]);var m=function(){c.yH.findAll({page:0}).then((function(n){var e;d(null!==(e=n.items)&&void 0!==e?e:[]),console.log(f)}))};return(0,u.jsx)(l.Ph,(0,i.Z)((0,i.Z)({},n),{},{ref:f,children:s.map((function(e,a){return(0,u.jsx)(o.Z,{value:e.id,children:e.getFullName()},"".concat(n.name,"-select-option-").concat(a))}))}))}},14997:function(n,e,a){var i=a(29439),t=a(1413),r=a(47313),l=a(71003),o=a(1001),c=a(50301),u=a(94469),s=a(33604),d=a(47605),f=a(69625),m=a(6961),h=a(69680),g=a(20791),p=a(65476),x=a(46417),v=r.forwardRef((function(n,e){return(0,x.jsx)(c.Z,(0,t.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,a=n.onDeny,t=n.onConfirm,c=n.title,Z=n.dialogTitle,j=r.useState(!1),b=(0,i.Z)(j,2),S=b[0],C=b[1];return(0,x.jsxs)(u.Z,{TransitionComponent:v,open:e,onClose:function(){return a(!1)},children:[(0,x.jsx)(s.Z,{children:(0,x.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:h.F3.SEMI_BOLD},id:"alert-dialog-title",children:Z})}),(0,x.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,p.ZP)("".concat(c))}),(0,x.jsxs)(m.Z,{sx:{pb:5,px:6},children:[(0,x.jsx)(l.Z,{variant:"outlined",sx:{fontWeight:h.F3.MEDIUM,mr:4},onClick:function(){return a(!1)},color:"secondary",children:(0,x.jsx)(o.Z,{id:"common.no"})}),(0,x.jsx)(g.M,{isSubmitting:S,onClick:function(){C(!0),t().finally((function(){C(!1),a(!1)}))},text:"Lanjutkan"})]})]})}},33187:function(n,e,a){var i=a(1413),t=(a(47313),a(19860)),r=a(24813),l=a(94469),o=a(33604),c=a(46417);e.Z=function(n){var e=(0,t.Z)(),a=(0,r.Z)(e.breakpoints.down("sm"));return(0,c.jsxs)(l.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,fullScreen:a,maxWidth:"sm"},n),{},{children:[n.title&&(0,c.jsx)(o.Z,{children:n.title}),n.children]}))}}}]);