"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[9393],{3168:function(n,e,t){t.r(e),t.d(e,{default:function(){return w}});var a=t(1413),i=t(29439),o=t(47313),r=t(92649),l=t(71003),u=t(69625),s=t(57775),c=t(40490),d=t.n(c),f=t(16330),h=t(20466),m=t(67375),v=t(1084),j=t(2682),S=t(33187),p=t(7410),x=t(3463),Z=t(57829),g=t(6961),b=t(20791),C=t(56417),P=t(65632),M=t(29417),k=t(97741),_=t(46417),y=function(n){var e=o.useState([]),t=(0,i.Z)(e,2),r=t[0],l=t[1];o.useEffect((function(){u()}),[]);var u=function(){f.JC.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,_.jsx)(M.Ph,(0,a.Z)((0,a.Z)({},n),{},{children:r.map((function(e,t){return(0,_.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(t))}))}))},F=x.Ry({courseId:x.Z_().required("Mata Pelajaran harus dipilih")}),I=function(n){var e=new C.O(f.$E,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(p.J9,{initialValues:n.model,validationSchema:F,onSubmit:function(n,t){return e.onSubmit(n,t)},children:function(e){var t=e.isSubmitting;return(0,_.jsxs)(p.l0,{children:[(0,_.jsx)(Z.Z,{mb:4,children:(0,_.jsx)(y,{fullWidth:!0,variant:"filled",name:"courseId",label:"Mata Pelajaran"})}),(0,_.jsx)(Z.Z,{mb:4,children:(0,_.jsx)(P.a,{variant:"filled",fullWidth:!0,name:"teacherId",label:"Guru Pengajar"})}),(0,_.jsx)(Z.Z,{mt:4,children:(0,_.jsxs)(g.Z,{children:[(0,_.jsx)(l.Z,{color:"secondary",onClick:n.onCancel,disabled:t,variant:"text",disableElevation:!0,children:"Batal"}),(0,_.jsx)(b.M,{isSubmitting:t,text:"Simpan"})]})})]})}})})},B=t(14997),T=t(97890),w=function(){var n=(0,T.UO)().classroomId,e=(0,o.useState)(null),t=(0,i.Z)(e,2),c=t[0],p=t[1],x=(0,v.I0)(),Z=o.useRef(),g=o.useCallback((function(n,e){n.formMode=e,p(n)}),[]),b=o.useCallback((function(n){x((0,m.PV)("Mata Pelajaran berhasil disimpan")),Z.current.onQueryChange(),P()}),[]),C=o.useCallback((function(){x((0,m.Tl)("Mata Pelajaran gagal disimpan"))}),[]),P=o.useCallback((function(){p(null)}),[]),M=o.useCallback((function(){return f.$E.remove(c).then((function(n){n.status?(Z.current.onQueryChange(),x((0,m.PV)("Mata Pelajaran telah dihapus"))):x((0,m.Tl)("Mata Pelajaran gagal dihapus"))}))}),[c]);return(0,_.jsxs)(r.Z,{title:"Pengaturan Mata Pelajaran",showBackButton:!0,toolbar:(0,_.jsx)(l.Z,{variant:"contained",onClick:function(){var e=new h.dg;e.classroomId=n,p(e)},children:"Tambah Mata Pelajaran"}),children:[c&&("create"==c.formMode||"edit"==c.formMode)&&(0,_.jsx)(S.Z,{open:!0,title:c.isNewRecord?"Tambah Mata Pelajaran":"Perbarui Mata Pelajaran",children:(0,_.jsx)(u.Z,{children:(0,_.jsx)(I,{model:c,onCancel:P,onSaveFailed:C,onSaveSuccess:b})})}),c&&"delete"==c.formMode&&(0,_.jsx)(B.Z,{open:!0,onDeny:P,onConfirm:M,dialogTitle:"Hapus Mata Pelajaran",title:"Yakin ingin menghapus Mata Pelajaran <strong>".concat(c.name,"</strong> ?")}),(0,_.jsx)(d(),{title:"",tableRef:Z,components:{Toolbar:function(){return(0,_.jsx)(_.Fragment,{})},Container:function(n){return(0,_.jsx)(s.Z,(0,a.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(e){return new Promise((function(t,a){f.$E.findAllByClassroom(n,{page:e.page+1}).then((function(n){n.status&&n.items?t({data:n.items,page:n.page-1,totalCount:n.totalCount}):t({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Mata Pelajaran",field:"courseId",render:function(n){var e;return null===(e=n.course)||void 0===e?void 0:e.name}},{title:"Guru Pengajar",field:"teacherId",render:function(n){var e;return null===(e=n.teacher)||void 0===e?void 0:e.getFullName()}},{title:"Last Update",field:"updatedAt",render:function(n){return(0,j.ss)(n.updatedAt)}}],actions:[{icon:"create",tooltip:"Edit Mata Pelajaran",onClick:function(n,e){e instanceof h.dg&&g(e,"edit"),x((0,m.SR)())}},{icon:"delete",tooltip:"Hapus Mata Pelajaran",iconProps:{color:"error"},onClick:function(n,e){e instanceof h.dg&&g(e,"delete")}}]})]})}},65632:function(n,e,t){t.d(e,{a:function(){return c}});var a=t(1413),i=t(29439),o=t(47313),r=t(29417),l=t(97741),u=t(16330),s=t(46417),c=function(n){var e=o.useState([]),t=(0,i.Z)(e,2),c=t[0],d=t[1],f=o.useRef();o.useEffect((function(){h()}),[]);var h=function(){u.yH.findAll({page:0}).then((function(n){var e;d(null!==(e=n.items)&&void 0!==e?e:[]),console.log(f)}))};return(0,s.jsx)(r.Ph,(0,a.Z)((0,a.Z)({},n),{},{ref:f,children:c.map((function(e,t){return(0,s.jsx)(l.Z,{value:e.id,children:e.getFullName()},"".concat(n.name,"-select-option-").concat(t))}))}))}},14997:function(n,e,t){var a=t(29439),i=t(1413),o=t(47313),r=t(71003),l=t(1001),u=t(50301),s=t(94469),c=t(33604),d=t(47605),f=t(69625),h=t(6961),m=t(69680),v=t(20791),j=t(65476),S=t(46417),p=o.forwardRef((function(n,e){return(0,S.jsx)(u.Z,(0,i.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,t=n.onDeny,i=n.onConfirm,u=n.title,x=n.dialogTitle,Z=o.useState(!1),g=(0,a.Z)(Z,2),b=g[0],C=g[1];return(0,S.jsxs)(s.Z,{TransitionComponent:p,open:e,onClose:function(){return t(!1)},children:[(0,S.jsx)(c.Z,{children:(0,S.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:m.F3.SEMI_BOLD},id:"alert-dialog-title",children:x})}),(0,S.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,j.ZP)("".concat(u))}),(0,S.jsxs)(h.Z,{sx:{pb:5,px:6},children:[(0,S.jsx)(r.Z,{variant:"outlined",sx:{fontWeight:m.F3.MEDIUM,mr:4},onClick:function(){return t(!1)},color:"secondary",children:(0,S.jsx)(l.Z,{id:"common.no"})}),(0,S.jsx)(v.M,{isSubmitting:b,onClick:function(){C(!0),i().finally((function(){C(!1),t(!1)}))},text:"Lanjutkan"})]})]})}},33187:function(n,e,t){var a=t(1413),i=(t(47313),t(19860)),o=t(24813),r=t(94469),l=t(33604),u=t(46417);e.Z=function(n){var e=(0,i.Z)(),t=(0,o.Z)(e.breakpoints.down("sm"));return(0,u.jsxs)(r.Z,(0,a.Z)((0,a.Z)({fullWidth:!0,fullScreen:t,maxWidth:"sm"},n),{},{children:[n.title&&(0,u.jsx)(l.Z,{children:n.title}),n.children]}))}},56417:function(n,e,t){t.d(e,{O:function(){return o}});var a=t(15671),i=t(43144),o=function(){function n(e,t,i){(0,a.Z)(this,n),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=e,this._onSaveSuccess=t.onSaveSuccess,this._onSaveFailed=t.onSaveFailed,this._onBeforeSubmit=null===i||void 0===i?void 0:i.onBeforeSubmit}return(0,i.Z)(n,[{key:"submitToServer",value:function(n){return this._onBeforeSubmit&&(n=this._onBeforeSubmit(n)),n.id?this.repository.update(n):this.repository.create(n)}},{key:"onSubmit",value:function(n,e,t){var a=this,i=e.setSubmitting,o=e.resetForm;i(!0),this.submitToServer(n).then((function(n){n.status?(!0===t&&o(),a._onSaveSuccess&&a._onSaveSuccess(n.item)):a._onSaveFailed&&a._onSaveFailed(),i(!1)}))}}]),n}()}}]);