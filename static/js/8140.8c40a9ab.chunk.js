"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[8140],{39246:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var i=t(47313),r=t(14924),a=t(57829),o=t(29417),l=t(20791),d=t(7410),s=t(3463),u=t(97890),c=t(44894),f=t(16330),h=t(1084),p=t(67375),m=t(69737),g=t(88913),v=t(46417),b=s.Ry({oldPassword:s.Z_().required("Kata sandi lama harus diisi"),newPassword:s.Z_().required("Kata sandi baru harus diisi").min(8,"Katasandi paling sedikit 8 karakter"),confirmPassword:s.Z_().required("Konfirmasi kata sandi harus diisi").oneOf([s.iH("newPassword")],"Konfirmasi kata sandi harus sama")}),x=function(){var e=(0,m.f)().user,n=(0,u.UO)(),t=n.accountId,i=n.accountType,s=(0,h.I0)(),x=function(){return(0,g.P)(c.lg.Admin,null===e||void 0===e?void 0:e.role)&&e.uid!==t};return(0,v.jsx)(r.Z,{children:(0,v.jsx)(d.J9,{initialValues:{oldPassword:x()?"-":"",newPassword:"",confirmPassword:""},validationSchema:b,onSubmit:function(e,n){var r=n.setSubmitting,a=n.resetForm;s((0,p.SR)()),x()||(f.P_.changeMyPassword(e.oldPassword,e.newPassword).then((function(e){e.status?(s((0,p.PV)("Katasandi telah diganti")),a()):s((0,p.Tl)("Katasandi lama salah"))})).finally((function(){r(!1)})),f.P_.updatePassword("student"===i?"student":"employee",t,e.newPassword).then((function(e){e.status?(s((0,p.PV)("Katasandi telah diganti")),a()):s((0,p.Tl)("Katasandi gagal diganti"))})).finally((function(){r(!1)})))},children:function(e){var n=e.isSubmitting;return(0,v.jsxs)(a.Z,{component:d.l0,children:[(0,v.jsx)(a.Z,{mb:8,display:x()?"none":"block",children:(0,v.jsx)(o.nv,{variant:"filled",type:"password",name:"oldPassword",label:"Kata sandi lama"})}),(0,v.jsx)(a.Z,{mb:8,children:(0,v.jsx)(o.nv,{variant:"filled",type:"password",name:"newPassword",label:"Kata sandi baru"})}),(0,v.jsx)(a.Z,{mb:8,children:(0,v.jsx)(o.nv,{variant:"filled",type:"password",name:"confirmPassword",label:"Konfirmasi kata sandi baru"})}),(0,v.jsx)(a.Z,{children:(0,v.jsx)(l.M,{isSubmitting:n,text:"Simpan"})})]})}})})},Z=t(92649),j=function(e){var n=(0,Z.W)().setTitle;return i.useEffect((function(){n("Ganti Password")}),[]),(0,v.jsx)(x,{})}},29417:function(e,n,t){t.d(n,{XZ:function(){return g},ou:function(){return P},ML:function(){return q},Ph:function(){return x},Kx:function(){return Z},nv:function(){return s}});var i=t(1413),r=t(29439),a=t(7410),o=t(8047),l=t(47313),d=t(46417),s=function(e){var n=(0,a.U$)(e),t=(0,r.Z)(n,2),l=t[0],s=t[1],u=s.error&&s.touched?s.error:"",c=(0,i.Z)({},e);return"filled"===e.variant&&(c.InputProps={disableUnderline:!0,style:{borderRadius:8}}),(0,d.jsx)(o.Z,(0,i.Z)((0,i.Z)({helperText:u,error:!!u,fullWidth:!0},c),l))},u=t(57204),c=t(5178),f=t(69746),h=t(69173),p=t(49969),m=t(20715),g=function(e){var n=(0,a.U$)(e),t=(0,r.Z)(n,2),o=t[0],l=t[1],s=l.error&&l.touched?l.error:"";return(0,d.jsxs)(u.Z,{component:"fieldset",error:!!s,children:[(0,d.jsx)(c.Z,{component:"legend",children:e.title}),(0,d.jsx)(f.Z,{children:(0,d.jsx)(h.Z,(0,i.Z)({control:(0,d.jsx)(p.Z,(0,i.Z)((0,i.Z)({checked:o.value},e),{},{onChange:o.onChange}))},e))}),(0,d.jsx)(m.Z,{children:s})]})},v=t(47992),b=t(68721),x=l.forwardRef((function(e,n){var t=(0,a.U$)(e),i=(0,r.Z)(t,2),o=i[0],s=i[1],c=s.error&&s.touched?s.error:"";return l.useImperativeHandle(n,(function(){return{initOnLoad:function(){console.log("x")}}})),(0,d.jsxs)(u.Z,{fullWidth:e.fullWidth,error:!!c,variant:e.variant,children:[(0,d.jsx)(v.Z,{children:e.label}),(0,d.jsx)(b.Z,{disableUnderline:"filled"===e.variant,labelId:"".concat(o.name,"-select-label"),id:"".concat(o.name,"-label"),name:o.name,value:o.value,onChange:o.onChange,style:"filled"===e.variant?{borderRadius:8}:void 0,children:e.children}),(0,d.jsx)(m.Z,{children:c})]})})),Z=function(e){var n=(0,a.U$)(e),t=(0,r.Z)(n,2),l=t[0],s=t[1],u=s.error&&s.touched?s.error:"";return(0,d.jsx)(o.Z,(0,i.Z)((0,i.Z)((0,i.Z)({multiline:!0},e),l),{},{helperText:u,error:!!u,fullWidth:!0}))},j=t(74359),y=t(1082),w=t(80836),k=t(74109),P=function(e){var n=(0,a.U$)(e),t=(0,r.Z)(n,2),l=t[0],s=t[1],u=s.error&&s.touched?s.error:"",c=(0,i.Z)({},e),f={disableUnderline:"filled"===e.variant,style:{borderRadius:8},endAdornment:(0,d.jsx)(y.Z,{position:"end",children:(0,d.jsx)(w.Z,{children:(0,d.jsx)(k.Z,{})})})};return(0,d.jsx)(j.W,(0,i.Z)((0,i.Z)({renderInput:function(e){return(0,d.jsx)(o.Z,(0,i.Z)((0,i.Z)({},e),{},{fullWidth:!0,variant:"filled",InputProps:f}))}},l),{},{inputVariant:e.variant,helperText:u,error:!!u,fullWidth:!0,ampm:!1,value:l.value,onChange:function(e){l.onChange({target:{name:l.name,value:e}})}},c))},C=t(7155),_=t(57829),U=t(98668),R=t(94469),I=t(33604),S=t(69625),W=t(6961),K=t(71003),T=t(80614),D=t(16330),A=t(65476),M=t(20791),V=t(93233),L=t.n(V),z=t(69737),E={flex:1,display:"flex",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#ffffff",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",height:100},F={borderColor:"#2196f3"},$={borderColor:"#00e676"},H={borderColor:"#ff1744"},B={image:{type:"image",title:"Unggah Gambar",accepted:"image/*"},doc:{type:"doc",title:"Unggah Dokumen",accepted:"application/pdf,.pdf,.doc,.docx"},attachment:{type:"attachment",title:"Unggah Attachment",accepted:"*"},audio:{type:"audio",title:"Unggah Audio",accepted:"audio/*"},video:{type:"video",title:"Unggah Video",accepted:"video/*"},youtube:{type:"youtube",title:"Tempelkan Video dari Youtube",accepted:"video/*"}},O=function(e){var n=e.initialValue,t=e.setData,a=e.placeholder,s=e.setEditor,u=e.onBeforePaste,c=(0,z.f)().user,f=(0,l.useRef)(null),h=(0,l.useRef)(null),p=l.useState(null),m=(0,r.Z)(p,2),g=m[0],v=m[1],b=l.useState(!1),x=(0,r.Z)(b,2),Z=x[0],j=x[1],y=l.useState(null),w=(0,r.Z)(y,2),k=w[0],P=w[1],V=l.useState(!1),O=(0,r.Z)(V,2),q=O[0],Y=O[1],G=l.useState(null),J=(0,r.Z)(G,2),N=J[0],X=J[1],Q=l.useState(null),ee=(0,r.Z)(Q,2),ne=ee[0],te=ee[1],ie=l.useCallback((function(e){var n=e[0];console.log(n),v(n),"doc"!==(null===ne||void 0===ne?void 0:ne.type)&&X(URL.createObjectURL(n)),Y(!1)}),[ne]),re=(0,T.uI)({accept:"image/*"}),ae=re.isDragActive,oe=re.isDragAccept,le=re.isDragReject,de=(0,l.useMemo)((function(){return(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},E),ae?F:{}),oe?$:{}),le?H:{})}),[ae,oe,le]),se=l.useState(!1),ue=(0,r.Z)(se,2),ce=ue[0],fe=ue[1],he=function(){fe(!1),v(null),X(null)};(0,l.useEffect)((function(){console.log(f)}),[]);var pe=l.useCallback((function(e,n){fe(!0),te(B[e]),h.current=n}),[]),me=function(e){if(null!=g||null!=k||""!==k){var n=null===ne||void 0===ne?void 0:ne.type;if(console.log(n,e),"image"===n)return"<img src='".concat(e,"' />");if("youtube"===n&&k){var t=L()(null!==k&&void 0!==k?k:"");return null==t?"Url tidak valid":'<iframe width="420" height="315"\n            src="https://www.youtube.com/embed/'.concat(t,'?rel=0" frameborder="0">\n            </iframe>')}if("video"===n&&null!=g)return"<video controls preload='none'>\n            <source src='".concat(e,"' type='").concat(g.type,"' />\n            Your browser does not support the video tag.\n            </video>");if("audio"===n)return"<audio src='".concat(e,"' controls preload='none'></audio>");if("doc"===n)return""==e?"Preview tidak tersedia untuk dokumen":'<iframe class="doc-viewer" style="width: 100%" height="500"\n            src="https://docs.google.com/viewer?url='.concat(e,'&embedded=true" frameborder="0">\n            </iframe>')}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(R.Z,{open:ce,onClose:he,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,d.jsx)(I.Z,{id:"alert-dialog-title",children:null===ne||void 0===ne?void 0:ne.title}),(0,d.jsx)(S.Z,{children:(0,d.jsx)(_.Z,{width:"500px",children:null!=g||"youtube"===(null===ne||void 0===ne?void 0:ne.type)&&k?(console.log("preview called"),q?(0,d.jsxs)(_.Z,{textAlign:"center",children:[(0,d.jsx)(_.Z,{children:"Memuat Preview"}),(0,d.jsx)(_.Z,{children:(0,d.jsx)(U.Z,{})})]}):null!=k&&""!==k?(0,d.jsx)(_.Z,{sx:{"& > *":{width:"100%"}},children:(0,A.ZP)("".concat(me("")))}):null!=g?(0,d.jsx)(_.Z,{sx:{"& > *":{width:"100%"}},children:(0,A.ZP)("".concat(me(null!==N&&void 0!==N?N:"")))}):void 0):"youtube"===(null===ne||void 0===ne?void 0:ne.type)?(0,d.jsx)(_.Z,{mt:4,children:(0,d.jsx)(o.Z,{id:"outlined-basic",label:"URL Youtube",variant:"outlined",fullWidth:!0,onChange:function(e){P(e.currentTarget.value)}})}):(0,d.jsx)(_.Z,{children:(0,d.jsx)(_.Z,{children:(0,d.jsx)(T.ZP,{multiple:!1,maxFiles:1,onDrop:ie,accept:null===ne||void 0===ne?void 0:ne.accepted,children:function(e){var n=e.getRootProps,t=e.getInputProps;return(0,d.jsx)("section",{children:(0,d.jsxs)("div",(0,i.Z)((0,i.Z)({},n({style:de})),{},{children:[(0,d.jsx)("input",(0,i.Z)({},t())),(0,d.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}))})}})})})})}),(0,d.jsxs)(W.Z,{children:[(0,d.jsx)(K.Z,{onClick:he,color:"inherit",variant:"text",disableElevation:!0,children:"Batal"}),g||"youtube"===(null===ne||void 0===ne?void 0:ne.type)&&k?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(K.Z,{onClick:function(){return v(null),void P(null)},variant:"outlined",children:"Hapus"}),(0,d.jsx)(M.M,{onClick:function(){var e;if("youtube"===(null===ne||void 0===ne?void 0:ne.type)&&k)return null===(e=h.current)||void 0===e||e.execCommand("mceInsertContent",!1,me(null!==k&&void 0!==k?k:"")),void he();if(g){var n;j(!0);var t=new Date,i=g.name.split("."),r=(null!==(n=null===c||void 0===c?void 0:c.uid)&&void 0!==n?n:"unknown-user")+"-"+t.getMilliseconds()+"."+i[i.length-1],a=new FormData;a.append("filename",r),a.append("file",g,g.name),D.RJ.image(a).then((function(e){var n,t,i;null===(n=h.current)||void 0===n||n.execCommand("mceInsertContent",!1,me(null!==(t=null===(i=e.item)||void 0===i?void 0:i.url)&&void 0!==t?t:"")),he(),j(!1)}))}},text:"youtube"===(null===ne||void 0===ne?void 0:ne.type)&&k?"Tambahkan":"Unggah",isSubmitting:Z,color:"primary",variant:"outlined"})]}):null]})]}),(0,d.jsx)(C.M,{onInit:function(e,n){f.current=n,s&&s(n)},onChange:function(){console.log(f.current.getContent()),f.current&&t&&t("content",f.current.getContent())},initialValue:n,init:{menubar:!1,statusbar:!1,placeholder:a,setup:function(e){},some_setting:1,media_live_embeds:!0,autoresize_bottom_margin:10,contextmenu:"link image media table",fontsize_formats:"8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",plugins:"autoresize image media link lists charmap table file-handler",toolbar:"formatgroup bold italic underline strikethrough aligngroup paragraphgroup | file-handler file-handler-image file-handler-audio file-handler-video file-handler-youtube | file-handler-doc",toolbar_groups:{formatgroup:{icon:"format",tooltip:"Formatting",items:"formatselect | fontsizeselect | forecolor backcolor | superscript subscript | removeformat "},aligngroup:{icon:"align-justify",tooltip:"Text Align",items:"alignleft aligncenter alignright alignjustify"},paragraphgroup:{icon:"paragraph",tooltip:"Paragraph format",items:"h1 h2 h3 | bullist numlist | indent outdent"},insertgroup:{icon:"plus",tooltip:"Insert",items:"file-handler-image | file-handler-audio | file-handler-video | file-handler-youtube | file-handler-doc "}},open_file_picker:pe,paste_preprocess:function(e,n){return u&&u(f,n)},content_style:'body { font-family:Poppins,Helvetica,Arial,sans-serif; font-size:14px }audio,img{max-width: 100% !important}[data-mce-object="video"]{width: 100%}video{width: 100% !important; height: auto !important}',toolbar_location:"top",external_plugins:{"file-handler":"/plugins/file-handler/plugin.min.js"},mobile:{theme:"silver",menubar:!1,toolbar_location:"top",toolbar:"bold italic underline file-handler-image file-handler-audio file-handler-video "},style_formats:[{title:"Image Left",selector:"img",styles:{float:"left",margin:"0 10px 0 10px"}},{title:"Image Right",selector:"img",styles:{float:"right",margin:"0 0 10px 10px"}}]}})]})},q=l.forwardRef((function(e,n){var t=(0,l.useRef)(),i=(0,l.useRef)(),o=(0,a.U$)(e),s=(0,r.Z)(o,2),c=s[0],f=s[1],h=f.error&&f.touched?f.error:"";return"string"!==typeof t.current&&(t.current="string"===typeof c.value?c.value:""),l.useImperativeHandle(n,(function(){return{resetEditor:function(){i.current&&console.log(i.current.setContent(""))}}})),(0,d.jsxs)(u.Z,{fullWidth:e.fullWidth,error:!!h,children:[(0,d.jsx)(v.Z,{id:"-select-label",children:e.label}),(0,d.jsx)(O,{onBeforePaste:e.onBeforePaste,setEditor:function(e){return i.current=e},initialValue:t.current,placeholder:e.placeholder,setData:function(e,n){c.onChange({target:{name:c.name,value:n}})}}),(0,d.jsx)(m.Z,{children:h})]})}))},20791:function(e,n,t){t.d(n,{M:function(){return l}});t(47313);var i=t(57829),r=t(71003),a=t(98668),o=t(46417),l=function(e){var n=e.isSubmitting,t=e.disabled,l=void 0!==t&&t,d=e.color,s=void 0===d?"primary":d,u=e.variant,c=void 0===u?"outlined":u,f=e.className,h=void 0===f?"":f,p=e.fullWidth,m=void 0!==p&&p,g=e.text,v=e.onClick;return(0,o.jsxs)(i.Z,{sx:{position:"relative",display:m?"block":"inline-block"},children:[(0,o.jsx)(r.Z,{type:"submit",onClick:v,color:s,variant:c,disabled:n||l,className:h,fullWidth:m,children:g}),n&&(0,o.jsx)(a.Z,{size:20,style:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})]})}}}]);