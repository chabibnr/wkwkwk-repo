"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[7606],{88864:function(e,i,t){t.r(i),t.d(i,{default:function(){return F}});var n=t(47313),o=t(94614),r=t(57829),a=t(63855),s=t(83061),l=t(65476),u=t(24929),c=t(83865),d=t(46417),f=function(e){var i,t,n,o,f=e.model;return(0,d.jsx)(r.Z,{className:(0,s.Z)("comment-item"),sx:{"&:not(:last-child)":{marginBottom:"10px"},"& video, audio, img":{width:"100%",maxWidth:"400px"}},children:(0,d.jsxs)(r.Z,{py:3,px:5,display:"block",alignItems:"center",flexWrap:"wrap",style:{border:"1px solid #E5E4EA",borderRadius:8},children:[(0,d.jsxs)(r.Z,{display:"flex",mb:1,children:[(0,d.jsx)(r.Z,{children:(0,d.jsx)(a.Z,{title:null!==(i=null===(t=f.author)||void 0===t?void 0:t.getFullName())&&void 0!==i?i:"",status:null===(n=f.author)||void 0===n?void 0:n.visibilityStatus,sx:{width:48,height:48}})}),(0,d.jsxs)(r.Z,{ml:4,children:[(0,d.jsx)(r.Z,{fontWeight:"bold",fontSize:"16px",children:null===(o=f.author)||void 0===o?void 0:o.getFullName()}),(0,d.jsx)(r.Z,{fontSize:11,color:u.Z[400],children:(0,d.jsx)(c.Z,{date:f.createdAt})})]})]}),(0,l.ZP)("".concat(f.comment))]})})},h=t(16330),m=t(62847),v=t(11579),x=t(79842),S=t(3463),p=t(29417),b=t(56417),j=t(20791),Z=S.Ry({comment:S.Z_().required("Judul harus diisi")}),g=function(e){var i=n.useRef(null),t=new b.O(h.fQ,{onSaveSuccess:function(t){return i.current&&i.current.resetEditor(),e.onSaveSuccess&&e.onSaveSuccess(t)},onSaveFailed:function(){return e.onSaveFailed&&e.onSaveFailed()}});return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(x.J9,{initialValues:e.model,validationSchema:Z,onSubmit:function(e,i){return t.onSubmit(e,i)},children:function(e){var t=e.isSubmitting;return(0,d.jsx)(x.l0,{children:(0,d.jsxs)(r.Z,{position:"relative",children:[(0,d.jsx)(p.ML,{ref:i,placeholder:"Tuliskan komentar",name:"comment",fullWidth:!0}),(0,d.jsx)(r.Z,{zIndex:99,children:(0,d.jsx)(j.M,{text:"Kirim Komentar",isSubmitting:t})})]})})}})})},y=function(e){var i,t=e.topicId,n=(0,v.useQuery)(["list-comments",t],(function(){return h.fQ.findAllByTopic(t,{page:0})})),a=n.data,s=n.refetch,l=new m.W4;return l.topicId=t,(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.CP,{title:"Diskusi",children:null!==a&&void 0!==a&&a.items?(0,d.jsx)(o.u3,{data:null!==(i=null===a||void 0===a?void 0:a.items)&&void 0!==i?i:[],renderRow:function(e){return(0,d.jsx)(f,{model:e})}}):(0,d.jsx)(o.Zp,{onAction:function(){},actionTitle:"Muat ulang",title:"Tidak ada tanggapan",description:"Tidak ada tanggapan pada artikel ini"})}),(0,d.jsx)(r.Z,{mt:2,children:(0,d.jsx)(o.CP,{title:"Tambah Tanggapan",children:(0,d.jsx)(g,{model:l,onSaveSuccess:function(e){return s()},onCancel:function(){}})})})]})},_=t(97890),F=function(){var e=(0,_.UO)().topicId;return(0,d.jsx)(y,{topicId:e})}},63855:function(e,i,t){var n=t(1413),o=t(45987),r=(t(47313),t(63585)),a=t(50919),s=t(46417),l=["className","title","url","status"];i.Z=function(e){var i,t,u=e.className,c=e.title,d=e.url,f=e.status,h=(0,o.Z)(e,l),m={online:"#11C15B",offline:"#F04F47",busy:"#ffba52"};return void 0==f&&(f="offline"),(0,s.jsx)(a.Z,{anchorOrigin:{horizontal:"right",vertical:"bottom"},color:"success",variant:"dot",overlap:"circular",sx:{"& .MuiBadge-badge":{backgroundColor:null!==(i=m[f])&&void 0!==i?i:m.offline,color:null!==(t=m[f])&&void 0!==t?t:m.offline,width:12,height:12,bottom:"15%",right:"15%",border:"2px solid #fff",borderRadius:12,"&::after":"online"!==f?{}:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}},children:d?(0,s.jsx)(r.Z,(0,n.Z)({className:u,src:d},h)):(0,s.jsx)(r.Z,(0,n.Z)((0,n.Z)({className:u},h),{},{children:c.charAt(1).toUpperCase()}))})}},83865:function(e,i,t){t(47313);var n=t(70816),o=t.n(n),r=t(11193),a=t(57829),s=t(46417);i.Z=function(e){var i=e.date,t=e.format,n=void 0===t?"LLLL":t;if(!i)return(0,s.jsx)(s.Fragment,{});i instanceof Date&&(i=o()(i));return(0,s.jsx)(r.Z,{title:i.format("LLLL"),children:(0,s.jsx)(a.Z,{sx:{display:"inline"},children:function(){var e=i;return e.isAfter(o()().subtract(6,"days"))?e.fromNow():e.format(n)}()})})}},56417:function(e,i,t){t.d(i,{O:function(){return r}});var n=t(15671),o=t(43144),r=function(){function e(i,t,o){(0,n.Z)(this,e),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=i,this._onSaveSuccess=t.onSaveSuccess,this._onSaveFailed=t.onSaveFailed,this._onBeforeSubmit=null===o||void 0===o?void 0:o.onBeforeSubmit}return(0,o.Z)(e,[{key:"submitToServer",value:function(e){return this._onBeforeSubmit&&(e=this._onBeforeSubmit(e)),e.id?this.repository.update(e):this.repository.create(e)}},{key:"onSubmit",value:function(e,i,t){var n=this,o=i.setSubmitting,r=i.resetForm;o(!0),this.submitToServer(e).then((function(e){e.status?(!0===t&&r(),n._onSaveSuccess&&n._onSaveSuccess(e.item)):n._onSaveFailed&&n._onSaveFailed(),o(!1)}))}}]),e}()}}]);