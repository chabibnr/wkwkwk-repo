"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[8866],{12354:function(t,e,n){n.r(e),n.d(e,{default:function(){return O}});var i=n(29439),a=n(47313),o=n(92649),s=n(71003),r=n(57829),l=n(54750),c=n(46417),u=(0,l.Z)((0,c.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V10h16v11zm0-13H4V5h16v3z"}),"CalendarTodayOutlined"),d=(0,l.Z)((0,c.jsx)("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),h=(0,l.Z)((0,c.jsx)("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zM7 11h5v5H7z"}),"TodayOutlined"),f=n(44610),x=n(2682),p=n(70816),v=n.n(p),m=[{id:"30hari",page:"",text:"30 Hari",mobileText:"",icon:(0,c.jsx)(u,{})},{id:"week",page:"",text:"Minggu ini",mobileText:"",icon:(0,c.jsx)(d,{})},{id:"month",page:"",text:"Bulan ini",mobileText:"",icon:(0,c.jsx)(u,{})},{id:"custom",page:"",text:"Custom",mobileText:"",icon:(0,c.jsx)(h,{})}],g=function(t){var e=function(e,n){t.onChange(e,n)};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(r.Z,{sx:{display:"flex",flexWrap:"wrap"},py:6,children:m.map((function(t,n){return(0,c.jsx)(f.Z,{sx:{justifyContent:"left",marginRight:function(t){return t.spacing(4)},width:150,padding:"14px 8px",height:40,borderRadius:25,"& .MuiChip-label":{lineHeight:"initial",paddingLeft:"16px"}},icon:t.icon,onClick:function(){return function(t){if("30hari"===t.id){var n=v()().subtract(30,"days").set({hour:0,minute:0,second:0}),i=v()().set({hour:23,minute:59,second:59});e((0,x.T2)(n),(0,x.T2)(i))}else if("week"===t.id){var a=v()().startOf("week"),o=v()().endOf("week");e((0,x.T2)(a),(0,x.T2)(o))}else if("month"===t.id){var s=v()().startOf("month"),r=v()().endOf("month");e((0,x.T2)(s),(0,x.T2)(r))}}(t)},label:t.text,variant:"outlined"},"filter-index-".concat(n))}))})})},b=n(16330),y=n(97890),j=n(11579),Z=n(94614),k=n(37762),w=n(5845),C=n.n(w),T=n(97548),B=n.n(T),S=n(69737),D=function(t){var e=a.useState([]),n=(0,i.Z)(e,2),o=n[0],s=n[1],r=a.useState([]),l=(0,i.Z)(r,2),u=l[0],d=l[1],h=a.useState([]),f=(0,i.Z)(h,2),p=f[0],v=f[1],m=(0,S.f)().user,g=function(t){var e,n=[],i=[],a=[],o=(0,k.Z)(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;n.push(r.name),i.push(r.avgReading),a.push(r.getAvgFeedback())}}catch(l){o.e(l)}finally{o.f()}v(n),d(i),s(a)};a.useEffect((function(){var e,n;t.startDate&&t.endDate?(e=t.startDate,n=t.endDate,m?b.Xv.reportReadingByTeacher(m.uid,{start:e,end:n}).then((function(t){t.items?g(t.items):(v([]),d([]),s([])),console.log("x",t)})):console.log("no user found")):console.log(t)}),[t.startDate,t.endDate]);var y={chart:{type:"line",width:null,height:300},xAxis:{categories:p,crosshair:!0},yAxis:[{opposite:!0,title:{text:""},labels:{enabled:!1,formatter:function(){if(this.pos>=0&&this.pos<=5){var t=(0,x.tB)(this.pos-1);console.log(t)}return"".concat(this.pos)}}},{title:{text:"Rata-rata Durasi Membaca (menit)"}}],title:{text:"",style:{fontWeight:"normal"}},plotOptions:{series:{dataLabels:{enabled:!0,inside:!0,align:"center",verticalAlign:"bottom",formatter:function(){return"number"===typeof this.y&&this.y<=5?(0,x.tB)(this.y).label:"".concat(this.y)}}}},series:[{name:"Rata-rata Membaca",type:"column",yAxis:1,data:u,dataLabels:{enabled:!0,inside:!0,align:"center",verticalAlign:"bottom",format:"{y}'"}},{name:"Rata-rata Pemahaman",yAxis:0,type:"line",data:o}],credits:{enabled:!1}};return(0,c.jsx)(B(),{highcharts:C(),options:y})},H=n(63492),z=n.n(H),O=function(t){var e=(0,y.UO)().employeeId,n=a.useRef(),l=(0,o.W)(),u=l.setTitle,d=l.setToolbar,h=(0,a.useState)(),f=(0,i.Z)(h,2),x=f[0],p=f[1],v=(0,j.useQuery)(["report",e],(function(){return w(x.start,x.end)})),m=(v.data,v.refetch);a.useEffect((function(){u("Report Guru"),d(k())}),[]);var k=a.useCallback((function(){return(0,c.jsx)(s.Z,{onClick:function(){z()(n.current)},children:"Download"})}),[n]),w=function(t,n){return b.Xv.reportByAuthor(e,{start:t,end:n})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g,{onChange:function(t,e){p({start:t,end:e}),m()}}),(0,c.jsxs)("div",{ref:n,children:[(0,c.jsx)(r.Z,{mb:4,children:(0,c.jsx)(Z.CP,{title:"Ringkasan Data",children:(0,c.jsx)(c.Fragment,{})})}),(0,c.jsx)(Z.CP,{title:"Grafik Pemahaman Siswa terhadap Materi",children:(0,c.jsx)(D,{endDate:null===x||void 0===x?void 0:x.end,startDate:null===x||void 0===x?void 0:x.start})})]})]})}},92649:function(t,e,n){n.d(e,{Z:function(){return T},W:function(){return C}});var i=n(29439),a=n(57829),o=n(34499),s=n(37429),r=n(80836),l=n(83213),c=n(47313),u=n(26672),d=n(97890),h=n(94614),f=n(4942),x=n(57451),p=n(21212),v=n(57775),m=n(50301),g=n(86302),b=n(1084),y=n(67375),j=n(46417),Z=function(t){var e=t.isAppDrawerOpen,n=t.sidebarContent,i=(0,b.I0)();return(0,j.jsx)(m.Z,{direction:"right",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,j.jsxs)(a.Z,{sx:{width:{lg:280}},children:[(0,j.jsx)(x.Z,{lgUp:!0,children:(0,j.jsx)(p.ZP,{open:e,onClose:function(){return i((0,y.Y1)())},sx:(0,f.Z)({position:"absolute"},"& .".concat(g.Z.paper),{width:280,"& .listItem":{zIndex:1305}}),children:n})}),(0,j.jsx)(x.Z,{lgDown:!0,children:(0,j.jsx)(v.Z,{style:{height:"100%"},children:n})})]})})},k=n(19406),w=c.createContext({setTitle:function(t){},setSubtitle:function(t){},setShowBackButton:function(t){},setOnBackButtonPress:function(t){},setToolbar:function(t){},resetLayout:function(){}}),C=function(){return(0,c.useContext)(w)},T=function(t){var e=(0,c.useState)(),n=(0,i.Z)(e,2),f=n[0],x=n[1],p=(0,c.useState)(t.toolbar),v=(0,i.Z)(p,2),m=v[0],g=v[1],y=(0,c.useState)(),C=(0,i.Z)(y,2),T=C[0],B=C[1],S=(0,c.useState)(t.showBackButton),D=(0,i.Z)(S,2),H=D[0],z=D[1],O=(0,c.useState)(t.fullView),V=(0,i.Z)(O,2),A=V[0],P=(V[1],(0,c.useState)()),R=(0,i.Z)(P,2),M=R[0],I=R[1],E=(0,c.useState)(t.sidebarContent),F=(0,i.Z)(E,2),L=F[0],_=(F[1],(0,c.useState)(t.contentPadding)),W=(0,i.Z)(_,2),U=W[0],G=(W[1],(0,d.s0)()),X=(0,c.useCallback)((function(){G(-1)}),[history]),Q=((0,b.I0)(),(0,b.v9)((function(t){return t.common})).isAppDrawerOpen),Y=(0,k.l5)().footer,q=((0,k.l5)().navStyle,null!==f&&void 0!==f?f:t.title),J=null!==T&&void 0!==T?T:t.subTitle,K=null!==m&&void 0!==m?m:t.toolbar,N=null!==H&&void 0!==H?H:t.showBackButton,$=null!==M&&void 0!==M?M:t.onBackButtonPress;return(0,c.useEffect)((function(){document.title=null!==q&&void 0!==q?q:"AFresto System Indonesia"}),[q]),(0,j.jsx)(w.Provider,{value:{setTitle:x,setSubtitle:B,setOnBackButtonPress:I,setShowBackButton:z,setToolbar:g,resetLayout:function(){x(void 0),B(void 0),z(void 0),I(void 0),g(void 0)}},children:(0,j.jsxs)(a.Z,{children:[q&&(0,j.jsxs)(o.ZP,{component:"div",sx:{backgroundColor:"#fff",borderBottom:"1px solid #ccc",position:"sticky",top:"70px",zIndex:99},secondaryAction:K,children:[N&&(0,j.jsx)(s.Z,{children:(0,j.jsx)(r.Z,{onClick:null!==$&&void 0!==$?$:X,children:(0,j.jsx)(u.x_l,{})})}),(0,j.jsx)(l.Z,{primary:q,primaryTypographyProps:{fontSize:20},secondary:J})]}),(0,j.jsx)(h.uc,{animation:"transition.slideUpIn",delay:200,children:(0,j.jsx)(a.Z,{sx:{p:null!==U&&void 0!==U?U:{xs:5,md:7.5,xl:12.5}},children:L?(0,j.jsxs)(a.Z,{sx:{display:"flex"},children:[L?(0,j.jsx)(a.Z,{children:(0,j.jsx)(Z,{isAppDrawerOpen:Q,footer:Y,fullView:A,sidebarContent:L})}):null,(0,j.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",lg:"calc(100% - ".concat(A?0:280,"px)")},pl:{lg:A?0:8}},children:t.children})]}):t.children})})]})})}}}]);