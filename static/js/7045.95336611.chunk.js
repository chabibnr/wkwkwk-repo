"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[7045],{79302:function(n,e,t){t.r(e),t.d(e,{default:function(){return F}});var i=t(1413),o=t(29439),a=t(47313),r=t(92649),l=t(71003),s=t(69625),u=t(57775),c=t(40490),d=t.n(c),f=t(16330),h=t(62847),m=t(67375),v=t(1084),x=t(33187),p=t(79842),Z=t(3463),g=t(57829),S=t(6961),j=t(20791),b=t(29417),C=t(56417),k=t(97741),y=t(46417),w=function(n){var e=a.useState([]),t=(0,o.Z)(e,2),r=t[0],l=t[1];a.useEffect((function(){s()}),[]);var s=function(){f.E$.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,y.jsx)(b.Ph,(0,i.Z)((0,i.Z)({},n),{},{children:r.map((function(e,t){return(0,y.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(t))}))}))},P=function(n){var e=a.useState([]),t=(0,o.Z)(e,2),r=t[0],l=t[1];a.useEffect((function(){s()}),[]);var s=function(){f.E7.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,y.jsx)(b.Ph,(0,i.Z)((0,i.Z)({},n),{},{children:r.map((function(e,t){return(0,y.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(t))}))}))},B=t(65632),R=Z.Ry({name:Z.Z_().required("Nama kelas harus dipilih"),specialisationId:Z.Z_().required("Guru Pengajar harus dipilih"),gradeId:Z.Z_().required("Guru Pengajar harus dipilih"),guardianTeacherId:Z.Z_().required("Guru Pengajar harus dipilih")}),_=function(n){var e=new C.O(f.nR,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(p.J9,{initialValues:n.model,validationSchema:R,onSubmit:function(n,t){return e.onSubmit(n,t)},children:function(e){var t=e.isSubmitting;return(0,y.jsxs)(p.l0,{children:[(0,y.jsx)(g.Z,{mb:4,children:(0,y.jsx)(b.nv,{name:"name",variant:"filled",label:"Nama Kelas"})}),(0,y.jsx)(g.Z,{mb:4,children:(0,y.jsx)(P,{fullWidth:!0,name:"specialisationId",label:"Jurusan",variant:"filled"})}),(0,y.jsx)(g.Z,{mb:4,children:(0,y.jsx)(w,{fullWidth:!0,name:"gradeId",label:"Tingkatan",variant:"filled"})}),(0,y.jsx)(g.Z,{mb:4,children:(0,y.jsx)(B.a,{variant:"filled",fullWidth:!0,name:"guardianTeacherId",label:"Wali Kelas"})}),(0,y.jsx)(g.Z,{mt:4,children:(0,y.jsxs)(S.Z,{children:[(0,y.jsx)(l.Z,{color:"secondary",onClick:n.onCancel,disabled:t,variant:"text",disableElevation:!0,children:"Batal"}),(0,y.jsx)(j.M,{isSubmitting:t,text:"Simpan"})]})})]})}})})},T=t(14997),I=t(29466),F=function(){var n=(0,a.useState)(null),e=(0,o.Z)(n,2),t=e[0],c=e[1],p=(0,v.I0)(),Z=a.useRef(),g=a.useCallback((function(n,e){n.formMode=e,c(n)}),[]),S=a.useCallback((function(n){p((0,m.PV)("Ruang Kelas berhasil disimpan")),Z.current.onQueryChange(),b()}),[]),j=a.useCallback((function(){p((0,m.Tl)("Ruang Kelas gagal disimpan"))}),[]),b=a.useCallback((function(){c(null)}),[]),C=a.useCallback((function(){return f.nR.remove(t).then((function(n){n.status?(Z.current.onQueryChange(),p((0,m.PV)("Ruang Kelas telah dihapus"))):p((0,m.Tl)("Ruang Kelas gagal dihapus"))}))}),[t]);return(0,y.jsxs)(r.Z,{title:"Pengaturan Ruang Kelas",toolbar:(0,y.jsx)(l.Z,{variant:"contained",onClick:function(){return c(new h.rV)},children:"Tambah Ruang Kelas"}),children:[t&&("create"==t.formMode||"edit"==t.formMode)&&(0,y.jsx)(x.Z,{open:!0,title:t.isNewRecord?"Tambah Ruang Kelas":"Perbarui Ruang Kelas",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(_,{model:t,onCancel:b,onSaveFailed:j,onSaveSuccess:S})})}),t&&"delete"==t.formMode&&(0,y.jsx)(T.Z,{open:!0,onDeny:b,onConfirm:C,dialogTitle:"Hapus Ruang Kelas",title:"Yakin ingin menghapus Ruang Kelas <strong>".concat(t.name,"</strong> ?")}),(0,y.jsx)(d(),{title:"",tableRef:Z,components:{Toolbar:function(){return(0,y.jsx)(y.Fragment,{})},Container:function(n){return(0,y.jsx)(u.Z,(0,i.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(n){return new Promise((function(e,t){f.nR.findAll({page:n.page+1}).then((function(n){n.status?e({data:n.items,page:n.page-1,totalCount:n.totalCount}):e({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Name",field:"name"},{title:"Tingkat",field:"gradeId",render:function(n){var e;return null===(e=n.grade)||void 0===e?void 0:e.name}},{title:"Specialisation",field:"specialisationId",render:function(n){var e;return null===(e=n.specialisation)||void 0===e?void 0:e.codeName}},{title:"Wali Kelas",render:function(n){var e;return null===(e=n.guardian)||void 0===e?void 0:e.getFullName()}},{title:"Siswa",align:"center",render:function(n){var e;return(0,y.jsxs)(l.Z,{component:I.rU,size:"small",variant:"text",color:"primary",to:"/setting/classroom/".concat(n.id,"/student"),children:[null!==(e=n.countStudent)&&void 0!==e?e:0," Siswa"]})}},{title:"Pelajaran",align:"center",render:function(n){var e;return(0,y.jsxs)(l.Z,{component:I.rU,size:"small",variant:"text",color:"primary",to:"/setting/classroom/".concat(n.id,"/course"),children:[null!==(e=n.countCourse)&&void 0!==e?e:0," Pelajaran"]})}}],actions:[{icon:"create",tooltip:"Edit Ruang Kelas",onClick:function(n,e){e instanceof h.rV&&g(e,"edit"),p((0,m.SR)())}},{icon:"delete",tooltip:"Hapus Ruang Kelas",iconProps:{color:"error"},onClick:function(n,e){e instanceof h.rV&&g(e,"delete")}}]})]})}},65632:function(n,e,t){t.d(e,{a:function(){return c}});var i=t(1413),o=t(29439),a=t(47313),r=t(29417),l=t(97741),s=t(16330),u=t(46417),c=function(n){var e=a.useState([]),t=(0,o.Z)(e,2),c=t[0],d=t[1],f=a.useRef();a.useEffect((function(){h()}),[]);var h=function(){s.yH.findAll({page:0}).then((function(n){var e;d(null!==(e=n.items)&&void 0!==e?e:[]),console.log(f)}))};return(0,u.jsx)(r.Ph,(0,i.Z)((0,i.Z)({},n),{},{ref:f,children:c.map((function(e,t){return(0,u.jsx)(l.Z,{value:e.id,children:e.getFullName()},"".concat(n.name,"-select-option-").concat(t))}))}))}},14997:function(n,e,t){var i=t(29439),o=t(1413),a=t(47313),r=t(71003),l=t(1001),s=t(50301),u=t(94469),c=t(33604),d=t(47605),f=t(69625),h=t(6961),m=t(69680),v=t(20791),x=t(65476),p=t(46417),Z=a.forwardRef((function(n,e){return(0,p.jsx)(s.Z,(0,o.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,t=n.onDeny,o=n.onConfirm,s=n.title,g=n.dialogTitle,S=a.useState(!1),j=(0,i.Z)(S,2),b=j[0],C=j[1];return(0,p.jsxs)(u.Z,{TransitionComponent:Z,open:e,onClose:function(){return t(!1)},children:[(0,p.jsx)(c.Z,{children:(0,p.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:m.F3.SEMI_BOLD},id:"alert-dialog-title",children:g})}),(0,p.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,x.ZP)("".concat(s))}),(0,p.jsxs)(h.Z,{sx:{pb:5,px:6},children:[(0,p.jsx)(r.Z,{variant:"outlined",sx:{fontWeight:m.F3.MEDIUM,mr:4},onClick:function(){return t(!1)},color:"secondary",children:(0,p.jsx)(l.Z,{id:"common.no"})}),(0,p.jsx)(v.M,{isSubmitting:b,onClick:function(){C(!0),o().finally((function(){C(!1),t(!1)}))},text:"Lanjutkan"})]})]})}},92649:function(n,e,t){t.d(e,{Z:function(){return w},W:function(){return y}});var i=t(29439),o=t(57829),a=t(34499),r=t(37429),l=t(80836),s=t(83213),u=t(47313),c=t(26672),d=t(97890),f=t(94614),h=t(4942),m=t(57451),v=t(21212),x=t(57775),p=t(50301),Z=t(86302),g=t(1084),S=t(67375),j=t(46417),b=function(n){var e=n.isAppDrawerOpen,t=n.sidebarContent,i=(0,g.I0)();return(0,j.jsx)(p.Z,{direction:"right",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,j.jsxs)(o.Z,{sx:{width:{lg:280}},children:[(0,j.jsx)(m.Z,{lgUp:!0,children:(0,j.jsx)(v.ZP,{open:e,onClose:function(){return i((0,S.Y1)())},sx:(0,h.Z)({position:"absolute"},"& .".concat(Z.Z.paper),{width:280,"& .listItem":{zIndex:1305}}),children:t})}),(0,j.jsx)(m.Z,{lgDown:!0,children:(0,j.jsx)(x.Z,{style:{height:"100%"},children:t})})]})})},C=t(19406),k=u.createContext({setTitle:function(n){},setSubtitle:function(n){},setShowBackButton:function(n){},setOnBackButtonPress:function(n){},setToolbar:function(n){},resetLayout:function(){}}),y=function(){return(0,u.useContext)(k)},w=function(n){var e=(0,u.useState)(),t=(0,i.Z)(e,2),h=t[0],m=t[1],v=(0,u.useState)(n.toolbar),x=(0,i.Z)(v,2),p=x[0],Z=x[1],S=(0,u.useState)(),y=(0,i.Z)(S,2),w=y[0],P=y[1],B=(0,u.useState)(n.showBackButton),R=(0,i.Z)(B,2),_=R[0],T=R[1],I=(0,u.useState)(n.fullView),F=(0,i.Z)(I,2),K=F[0],E=(F[1],(0,u.useState)()),O=(0,i.Z)(E,2),W=O[0],A=O[1],D=(0,u.useState)(n.sidebarContent),M=(0,i.Z)(D,2),V=M[0],z=(M[1],(0,u.useState)(n.contentPadding)),N=(0,i.Z)(z,2),U=N[0],q=(N[1],(0,d.s0)()),L=(0,u.useCallback)((function(){q(-1)}),[history]),G=((0,g.I0)(),(0,g.v9)((function(n){return n.common})).isAppDrawerOpen),H=(0,C.l5)().footer,J=((0,C.l5)().navStyle,null!==h&&void 0!==h?h:n.title),Q=null!==w&&void 0!==w?w:n.subTitle,Y=null!==p&&void 0!==p?p:n.toolbar,$=null!==_&&void 0!==_?_:n.showBackButton,X=null!==W&&void 0!==W?W:n.onBackButtonPress;return(0,u.useEffect)((function(){document.title=null!==J&&void 0!==J?J:"AFresto System Indonesia"}),[J]),(0,j.jsx)(k.Provider,{value:{setTitle:m,setSubtitle:P,setOnBackButtonPress:A,setShowBackButton:T,setToolbar:Z,resetLayout:function(){m(void 0),P(void 0),T(void 0),A(void 0),Z(void 0)}},children:(0,j.jsxs)(o.Z,{children:[J&&(0,j.jsxs)(a.ZP,{component:"div",sx:{backgroundColor:"#fff",borderBottom:"1px solid #ccc",position:"sticky",top:"70px",zIndex:99},secondaryAction:Y,children:[$&&(0,j.jsx)(r.Z,{children:(0,j.jsx)(l.Z,{onClick:null!==X&&void 0!==X?X:L,children:(0,j.jsx)(c.x_l,{})})}),(0,j.jsx)(s.Z,{primary:J,primaryTypographyProps:{fontSize:20},secondary:Q})]}),(0,j.jsx)(f.uc,{animation:"transition.slideUpIn",delay:200,children:(0,j.jsx)(o.Z,{sx:{p:null!==U&&void 0!==U?U:{xs:5,md:7.5,xl:12.5}},children:V?(0,j.jsxs)(o.Z,{sx:{display:"flex"},children:[V?(0,j.jsx)(o.Z,{children:(0,j.jsx)(b,{isAppDrawerOpen:G,footer:H,fullView:K,sidebarContent:V})}):null,(0,j.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",lg:"calc(100% - ".concat(K?0:280,"px)")},pl:{lg:K?0:8}},children:n.children})]}):n.children})})]})})}},33187:function(n,e,t){var i=t(1413),o=(t(47313),t(19860)),a=t(24813),r=t(94469),l=t(33604),s=t(46417);e.Z=function(n){var e=(0,o.Z)(),t=(0,a.Z)(e.breakpoints.down("sm"));return(0,s.jsxs)(r.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,fullScreen:t,maxWidth:"sm"},n),{},{children:[n.title&&(0,s.jsx)(l.Z,{children:n.title}),n.children]}))}},56417:function(n,e,t){t.d(e,{O:function(){return a}});var i=t(15671),o=t(43144),a=function(){function n(e,t,o){(0,i.Z)(this,n),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=e,this._onSaveSuccess=t.onSaveSuccess,this._onSaveFailed=t.onSaveFailed,this._onBeforeSubmit=null===o||void 0===o?void 0:o.onBeforeSubmit}return(0,o.Z)(n,[{key:"submitToServer",value:function(n){return this._onBeforeSubmit&&(n=this._onBeforeSubmit(n)),n.id?this.repository.update(n):this.repository.create(n)}},{key:"onSubmit",value:function(n,e,t){var i=this,o=e.setSubmitting,a=e.resetForm;o(!0),this.submitToServer(n).then((function(n){n.status?(!0===t&&a(),i._onSaveSuccess&&i._onSaveSuccess(n.item)):i._onSaveFailed&&i._onSaveFailed(),o(!1)}))}}]),n}()}}]);