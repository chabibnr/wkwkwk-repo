"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[8450],{33851:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var i=t(93433),o=t(15861),s=t(87757),r=t.n(s),l=t(47313),a=t(92649),c=t(16330),d=t(25403),u=t(94614),x=t(11579),f=t(97890),p=t(29439),m=t(1413),h=t(45987),g=t(71003),Z=t(88564),v=t(94469),j=t(33604),b=t(69625),y=t(6961),C=t(80836),k=t(11198),w=t(57829),S=t(20466),I=t(34499),P=t(37429),A=t(63585),O=t(83213),N=t(32916),z=t(46417),B=function(e){var n,t=e.model,i=e.selected,o=e.selectItem,s=e.unSelectItem;return(0,z.jsxs)(I.ZP,{button:!0,onClick:function(){return i?s(t.id):o(t.id)},sx:{outline:i?"1px solid rgba(10, 143, 220, 0.5)":"none",backgroundColor:"#fff",borderRadius:"16px"},children:[(0,z.jsx)(P.Z,{children:(0,z.jsx)(A.Z,{sx:{bgcolor:i?"rgba(10, 143, 220, 1)":""},children:i?(0,z.jsx)(N.UgA,{}):"A"})}),(0,z.jsx)(O.Z,{primary:t.getFullName(),secondary:null!==(n=t.nis)&&void 0!==n?n:"-"})]})},D=t(20791),T=["children","onClose"],R=(0,Z.ZP)(v.Z)((function(e){var n=e.theme;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}})),U=function(e){var n=e.children,t=e.onClose,i=(0,h.Z)(e,T);return(0,z.jsxs)(j.Z,(0,m.Z)((0,m.Z)({sx:{m:0,p:2}},i),{},{children:[n,t?(0,z.jsx)(C.Z,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,z.jsx)(k.Z,{})}):null]}))};function E(e){var n,t=l.useState(!1),o=(0,p.Z)(t,2),s=o[0],r=o[1],a=l.useState(!1),d=(0,p.Z)(a,2),m=d[0],h=d[1],Z=l.useState([]),v=(0,p.Z)(Z,2),j=v[0],C=v[1],k=(0,x.useQuery)(["find-user-not-in-class"],(function(){return c.k6.findAllNoClass({})})).data,I=(0,f.UO)().classroomId,P=function(e){j.push(e),C((0,i.Z)(j))},A=function(e){var n=j.indexOf(e);j.splice(n,1),C((0,i.Z)(j))},O=function(){r(!1)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{variant:"outlined",onClick:function(){r(!0)},children:"Tambah Siswa"}),(0,z.jsxs)(R,{onClose:O,"aria-labelledby":"customized-dialog-title",open:s,maxWidth:"lg",children:[(0,z.jsx)(U,{id:"customized-dialog-title",onClose:O,children:"Modal title"}),(0,z.jsx)(b.Z,{children:(0,z.jsx)(w.Z,{m:2,bgcolor:"#cccccc4f",borderRadius:"16px",p:4,display:"grid",children:(0,z.jsx)(u.O1,{data:null!==(n=null===k||void 0===k?void 0:k.items)&&void 0!==n?n:[],responsive:{xs:2,sm:3},renderRow:function(e,n){return(0,z.jsx)(B,{model:e,selectItem:P,unSelectItem:A,selected:-1!==j.indexOf(e.id)},"classroom-student-id-".concat(e.id))}})})}),(0,z.jsx)(y.Z,{children:(0,z.jsx)(D.M,{isSubmitting:m,text:"Tambahkan Siswa",onClick:function(){h(!0);var n=new S.ap;n.studentIds=j,n.active=!0,n.classroomId=I,c.xm.create(n).then((function(n){console.log("complete"),e.onComplete(),O()})).finally((function(){return h(!1)}))}})})]})]})}var F=function(){var e=(0,f.UO)().classroomId,n=(0,x.useInfiniteQuery)(["list-student-by-classroom",e],(function(e){var n=e.pageParam;return g(void 0===n?1:n)}),{getNextPageParam:function(e,n){return e.totalPages>e.page?e.page+1:void 0}}),t=n.data,s=n.refetch,l=n.isLoading,p=n.isFetchingNextPage,m=n.fetchNextPage,h=n.hasNextPage,g=function(){var n=(0,o.Z)(r().mark((function n(){var t,i,o=arguments;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,n.next=3,c.xm.findAllByClassroom(e,{page:t,size:50});case 3:return i=n.sent,console.log(i),n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,z.jsx)(a.Z,{title:"Daftar Siswa",showBackButton:!0,toolbar:(0,z.jsx)(E,{onComplete:function(){s()}}),children:(0,z.jsx)(u.O1,{onEndReached:function(){h&&m()},footerProps:{footerText:"",loading:l||p},data:function(){if(t&&t.pages){var e=[];return t.pages.forEach((function(n){e=[].concat((0,i.Z)(e),(0,i.Z)(n.items))})),e}return[]}(),responsive:{xs:1,sm:2,md:4,lg:5},renderRow:function(e){return(0,z.jsx)(d.Z,{hasClass:!0,model:e.student},"item-user-".concat(e.id))}})})}},25403:function(e,n,t){t(47313);var i=t(57775),o=t(57829),s=t(63585),r=t(47605),l=t(44610),a=t(29466),c=t(83061),d=t(46417);n.Z=function(e){var n,t=e.model,u=e.hasClass,x=void 0!==u&&u;return(0,d.jsx)(i.Z,{className:(0,c.Z)("card-hover"),children:(0,d.jsxs)(o.Z,{component:a.rU,to:"/student/".concat(t.id,"/profile"),m:2,borderRadius:"16px",p:4,textAlign:"center",display:"grid",alignItems:"center",sx:{"&:link":{textDecoration:"none !important"}},children:[(0,d.jsx)(s.Z,{sx:{margin:"auto",width:{xs:50,md:770,lg:90,xl:110},height:{xs:50,md:770,lg:90,xl:110}},src:"/assets/images/no-user.gif",children:"H"}),(0,d.jsxs)(o.Z,{mt:2,children:[(0,d.jsx)(r.Z,{fontWeight:700,color:"#000",children:t.getFullName()}),x?"":null!==(n=t.classroom)&&void 0!==n&&n.name?(0,d.jsx)(l.Z,{label:t.classroom.name,size:"small",variant:"outlined",color:"success"}):(0,d.jsx)(l.Z,{label:"Belum masuk kelas",size:"small",variant:"outlined",color:"error"})]})]})})}},92649:function(e,n,t){t.d(n,{Z:function(){return S},W:function(){return w}});var i=t(29439),o=t(57829),s=t(34499),r=t(37429),l=t(80836),a=t(83213),c=t(47313),d=t(26672),u=t(97890),x=t(94614),f=t(4942),p=t(57451),m=t(21212),h=t(57775),g=t(50301),Z=t(86302),v=t(1084),j=t(67375),b=t(46417),y=function(e){var n=e.isAppDrawerOpen,t=e.sidebarContent,i=(0,v.I0)();return(0,b.jsx)(g.Z,{direction:"right",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,b.jsxs)(o.Z,{sx:{width:{lg:280}},children:[(0,b.jsx)(p.Z,{lgUp:!0,children:(0,b.jsx)(m.ZP,{open:n,onClose:function(){return i((0,j.Y1)())},sx:(0,f.Z)({position:"absolute"},"& .".concat(Z.Z.paper),{width:280,"& .listItem":{zIndex:1305}}),children:t})}),(0,b.jsx)(p.Z,{lgDown:!0,children:(0,b.jsx)(h.Z,{style:{height:"100%"},children:t})})]})})},C=t(19406),k=c.createContext({setTitle:function(e){}}),w=function(){return(0,c.useContext)(k)},S=function(e){var n,t=(0,c.useState)(e.title),f=(0,i.Z)(t,2),p=f[0],m=f[1],h=(0,c.useState)(e.toolbar),g=(0,i.Z)(h,2),Z=g[0],j=(g[1],(0,c.useState)(e.subTitle)),w=(0,i.Z)(j,2),S=w[0],I=(w[1],(0,c.useState)(e.showBackButton)),P=(0,i.Z)(I,2),A=P[0],O=(P[1],(0,c.useState)(e.fullView)),N=(0,i.Z)(O,2),z=N[0],B=(N[1],(0,c.useState)()),D=(0,i.Z)(B,2),T=D[0],R=(D[1],(0,c.useState)(e.sidebarContent)),U=(0,i.Z)(R,2),E=U[0],F=(U[1],(0,c.useState)(e.contentPadding)),M=(0,i.Z)(F,2),W=M[0],_=(M[1],(0,u.s0)()),L=(0,c.useCallback)((function(){_(-1)}),[history]),Q=((0,v.I0)(),(0,v.v9)((function(e){return e.common})).isAppDrawerOpen),V=(0,C.l5)().footer;(0,C.l5)().navStyle;return(0,c.useEffect)((function(){document.title=null!==p&&void 0!==p?p:"AFresto System Indonesia"}),[p]),(0,b.jsx)(k.Provider,{value:{setTitle:m},children:(0,b.jsxs)(o.Z,{children:[p&&(0,b.jsxs)(s.ZP,{component:"div",sx:{backgroundColor:"#fff",borderBottom:"1px solid #ccc",position:"sticky",top:"70px",zIndex:99},secondaryAction:Z,children:[A&&(0,b.jsx)(r.Z,{children:(0,b.jsx)(l.Z,{onClick:null!==(n=null!==T&&void 0!==T?T:e.onBackButtonPress)&&void 0!==n?n:L,children:(0,b.jsx)(d.x_l,{})})}),(0,b.jsx)(a.Z,{primary:p,primaryTypographyProps:{fontSize:20},secondary:S})]}),(0,b.jsx)(x.uc,{animation:"transition.slideUpIn",delay:200,children:(0,b.jsx)(o.Z,{sx:{p:null!==W&&void 0!==W?W:{xs:5,md:7.5,xl:12.5}},children:E?(0,b.jsxs)(o.Z,{sx:{display:"flex"},children:[E?(0,b.jsx)(o.Z,{children:(0,b.jsx)(y,{isAppDrawerOpen:Q,footer:V,fullView:z,sidebarContent:E})}):null,(0,b.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",lg:"calc(100% - ".concat(z?0:280,"px)")},pl:{lg:z?0:8}},children:e.children})]}):e.children})})]})})}},20791:function(e,n,t){t.d(n,{M:function(){return l}});t(47313);var i=t(57829),o=t(71003),s=t(98668),r=t(46417),l=function(e){var n=e.isSubmitting,t=e.disabled,l=void 0!==t&&t,a=e.color,c=void 0===a?"primary":a,d=e.variant,u=void 0===d?"outlined":d,x=e.className,f=void 0===x?"":x,p=e.fullWidth,m=void 0!==p&&p,h=e.text,g=e.onClick;return(0,r.jsxs)(i.Z,{sx:{position:"relative",display:m?"block":"inline-block"},children:[(0,r.jsx)(o.Z,{type:"submit",onClick:g,color:c,variant:u,disabled:n||l,className:f,fullWidth:m,children:h}),n&&(0,r.jsx)(s.Z,{size:20,style:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})]})}}}]);