"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[7045],{79302:function(n,e,i){i.r(e),i.d(e,{default:function(){return w}});var t=i(1413),a=i(29439),o=i(47313),r=i(92649),l=i(71003),u=i(69625),s=i(57775),c=i(40490),d=i.n(c),f=i(16330),h=i(20466),m=i(67375),v=i(1084),g=i(33187),p=i(7410),x=i(3463),S=i(57829),Z=i(6961),j=i(20791),b=i(29417),C=i(56417),k=i(97741),R=i(46417),_=function(n){var e=o.useState([]),i=(0,a.Z)(e,2),r=i[0],l=i[1];o.useEffect((function(){u()}),[]);var u=function(){f.E$.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,R.jsx)(b.Ph,(0,t.Z)((0,t.Z)({},n),{},{children:r.map((function(e,i){return(0,R.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(i))}))}))},y=function(n){var e=o.useState([]),i=(0,a.Z)(e,2),r=i[0],l=i[1];o.useEffect((function(){u()}),[]);var u=function(){f.E7.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,R.jsx)(b.Ph,(0,t.Z)((0,t.Z)({},n),{},{children:r.map((function(e,i){return(0,R.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(i))}))}))},F=i(65632),K=x.Ry({name:x.Z_().required("Nama kelas harus dipilih"),specialisationId:x.Z_().required("Guru Pengajar harus dipilih"),gradeId:x.Z_().required("Guru Pengajar harus dipilih"),guardianTeacherId:x.Z_().required("Guru Pengajar harus dipilih")}),P=function(n){var e=new C.O(f.nR,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(p.J9,{initialValues:n.model,validationSchema:K,onSubmit:function(n,i){return e.onSubmit(n,i)},children:function(e){var i=e.isSubmitting;return(0,R.jsxs)(p.l0,{children:[(0,R.jsx)(S.Z,{mb:4,children:(0,R.jsx)(b.nv,{name:"name",variant:"filled",label:"Nama Kelas"})}),(0,R.jsx)(S.Z,{mb:4,children:(0,R.jsx)(y,{fullWidth:!0,name:"specialisationId",label:"Jurusan",variant:"filled"})}),(0,R.jsx)(S.Z,{mb:4,children:(0,R.jsx)(_,{fullWidth:!0,name:"gradeId",label:"Tingkatan",variant:"filled"})}),(0,R.jsx)(S.Z,{mb:4,children:(0,R.jsx)(F.a,{variant:"filled",fullWidth:!0,name:"guardianTeacherId",label:"Wali Kelas"})}),(0,R.jsx)(S.Z,{mt:4,children:(0,R.jsxs)(Z.Z,{children:[(0,R.jsx)(l.Z,{color:"secondary",onClick:n.onCancel,disabled:i,variant:"text",disableElevation:!0,children:"Batal"}),(0,R.jsx)(j.M,{isSubmitting:i,text:"Simpan"})]})})]})}})})},T=i(14997),I=i(29466),w=function(){var n=(0,o.useState)(null),e=(0,a.Z)(n,2),i=e[0],c=e[1],p=(0,v.I0)(),x=o.useRef(),S=o.useCallback((function(n,e){n.formMode=e,c(n)}),[]),Z=o.useCallback((function(n){p((0,m.PV)("Ruang Kelas berhasil disimpan")),x.current.onQueryChange(),b()}),[]),j=o.useCallback((function(){p((0,m.Tl)("Ruang Kelas gagal disimpan"))}),[]),b=o.useCallback((function(){c(null)}),[]),C=o.useCallback((function(){return f.nR.remove(i).then((function(n){n.status?(x.current.onQueryChange(),p((0,m.PV)("Ruang Kelas telah dihapus"))):p((0,m.Tl)("Ruang Kelas gagal dihapus"))}))}),[i]);return(0,R.jsxs)(r.Z,{title:"Pengaturan Ruang Kelas",toolbar:(0,R.jsx)(l.Z,{variant:"contained",onClick:function(){return c(new h.rV)},children:"Tambah Ruang Kelas"}),children:[i&&("create"==i.formMode||"edit"==i.formMode)&&(0,R.jsx)(g.Z,{open:!0,title:i.isNewRecord?"Tambah Ruang Kelas":"Perbarui Ruang Kelas",children:(0,R.jsx)(u.Z,{children:(0,R.jsx)(P,{model:i,onCancel:b,onSaveFailed:j,onSaveSuccess:Z})})}),i&&"delete"==i.formMode&&(0,R.jsx)(T.Z,{open:!0,onDeny:b,onConfirm:C,dialogTitle:"Hapus Ruang Kelas",title:"Yakin ingin menghapus Ruang Kelas <strong>".concat(i.name,"</strong> ?")}),(0,R.jsx)(d(),{title:"",tableRef:x,components:{Toolbar:function(){return(0,R.jsx)(R.Fragment,{})},Container:function(n){return(0,R.jsx)(s.Z,(0,t.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(n){return new Promise((function(e,i){f.nR.findAll({page:n.page+1}).then((function(n){n.status?e({data:n.items,page:n.page-1,totalCount:n.totalCount}):e({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Name",field:"name"},{title:"Tingkat",field:"gradeId",render:function(n){var e;return null===(e=n.grade)||void 0===e?void 0:e.name}},{title:"Specialisation",field:"specialisationId",render:function(n){var e;return null===(e=n.specialisation)||void 0===e?void 0:e.codeName}},{title:"Wali Kelas",render:function(n){var e;return null===(e=n.guardian)||void 0===e?void 0:e.getFullName()}},{title:"Siswa",align:"center",render:function(n){var e;return(0,R.jsxs)(l.Z,{component:I.rU,size:"small",variant:"text",color:"primary",to:"/setting/classroom/".concat(n.id,"/student"),children:[null!==(e=n.countStudent)&&void 0!==e?e:0," Siswa"]})}},{title:"Pelajaran",align:"center",render:function(n){var e;return(0,R.jsxs)(l.Z,{component:I.rU,size:"small",variant:"text",color:"primary",to:"/setting/classroom/".concat(n.id,"/course"),children:[null!==(e=n.countCourse)&&void 0!==e?e:0," Pelajaran"]})}}],actions:[{icon:"create",tooltip:"Edit Ruang Kelas",onClick:function(n,e){e instanceof h.rV&&S(e,"edit"),p((0,m.SR)())}},{icon:"delete",tooltip:"Hapus Ruang Kelas",iconProps:{color:"error"},onClick:function(n,e){e instanceof h.rV&&S(e,"delete")}}]})]})}},65632:function(n,e,i){i.d(e,{a:function(){return c}});var t=i(1413),a=i(29439),o=i(47313),r=i(29417),l=i(97741),u=i(16330),s=i(46417),c=function(n){var e=o.useState([]),i=(0,a.Z)(e,2),c=i[0],d=i[1],f=o.useRef();o.useEffect((function(){h()}),[]);var h=function(){u.yH.findAll({page:0}).then((function(n){var e;d(null!==(e=n.items)&&void 0!==e?e:[]),console.log(f)}))};return(0,s.jsx)(r.Ph,(0,t.Z)((0,t.Z)({},n),{},{ref:f,children:c.map((function(e,i){return(0,s.jsx)(l.Z,{value:e.id,children:e.getFullName()},"".concat(n.name,"-select-option-").concat(i))}))}))}},14997:function(n,e,i){var t=i(29439),a=i(1413),o=i(47313),r=i(71003),l=i(1001),u=i(50301),s=i(94469),c=i(33604),d=i(47605),f=i(69625),h=i(6961),m=i(69680),v=i(20791),g=i(65476),p=i(46417),x=o.forwardRef((function(n,e){return(0,p.jsx)(u.Z,(0,a.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,i=n.onDeny,a=n.onConfirm,u=n.title,S=n.dialogTitle,Z=o.useState(!1),j=(0,t.Z)(Z,2),b=j[0],C=j[1];return(0,p.jsxs)(s.Z,{TransitionComponent:x,open:e,onClose:function(){return i(!1)},children:[(0,p.jsx)(c.Z,{children:(0,p.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:m.F3.SEMI_BOLD},id:"alert-dialog-title",children:S})}),(0,p.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,g.ZP)("".concat(u))}),(0,p.jsxs)(h.Z,{sx:{pb:5,px:6},children:[(0,p.jsx)(r.Z,{variant:"outlined",sx:{fontWeight:m.F3.MEDIUM,mr:4},onClick:function(){return i(!1)},color:"secondary",children:(0,p.jsx)(l.Z,{id:"common.no"})}),(0,p.jsx)(v.M,{isSubmitting:b,onClick:function(){C(!0),a().finally((function(){C(!1),i(!1)}))},text:"Lanjutkan"})]})]})}},33187:function(n,e,i){var t=i(1413),a=(i(47313),i(19860)),o=i(24813),r=i(94469),l=i(33604),u=i(46417);e.Z=function(n){var e=(0,a.Z)(),i=(0,o.Z)(e.breakpoints.down("sm"));return(0,u.jsxs)(r.Z,(0,t.Z)((0,t.Z)({fullWidth:!0,fullScreen:i,maxWidth:"sm"},n),{},{children:[n.title&&(0,u.jsx)(l.Z,{children:n.title}),n.children]}))}},56417:function(n,e,i){i.d(e,{O:function(){return o}});var t=i(15671),a=i(43144),o=function(){function n(e,i,a){(0,t.Z)(this,n),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=e,this._onSaveSuccess=i.onSaveSuccess,this._onSaveFailed=i.onSaveFailed,this._onBeforeSubmit=null===a||void 0===a?void 0:a.onBeforeSubmit}return(0,a.Z)(n,[{key:"submitToServer",value:function(n){return this._onBeforeSubmit&&(n=this._onBeforeSubmit(n)),n.id?this.repository.update(n):this.repository.create(n)}},{key:"onSubmit",value:function(n,e,i){var t=this,a=e.setSubmitting,o=e.resetForm;a(!0),this.submitToServer(n).then((function(n){n.status?(!0===i&&o(),t._onSaveSuccess&&t._onSaveSuccess(n.item)):t._onSaveFailed&&t._onSaveFailed(),a(!1)}))}}]),n}()}}]);