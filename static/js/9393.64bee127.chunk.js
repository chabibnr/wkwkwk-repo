"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[9393],{3168:function(n,e,a){a.r(e),a.d(e,{default:function(){return R}});var t=a(1413),i=a(29439),r=a(47313),o=a(92649),l=a(71003),c=a(69625),u=a(57775),s=a(40490),d=a.n(s),f=a(16330),h=a(20466),m=a(67375),j=a(1084),x=a(2682),p=a(33187),g=a(7410),v=a(3463),Z=a(57829),b=a(6961),C=a(20791),P=a(56417),S=a(65632),M=a(29417),k=a(97741),y=a(46417),I=function(n){var e=r.useState([]),a=(0,i.Z)(e,2),o=a[0],l=a[1];r.useEffect((function(){c()}),[]);var c=function(){f.JC.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,y.jsx)(M.Ph,(0,t.Z)((0,t.Z)({},n),{},{children:o.map((function(e,a){return(0,y.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(a))}))}))},w=v.Ry({courseId:v.Z_().required("Mata Pelajaran harus dipilih")}),E=function(n){var e=new P.O(f.$E,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(g.J9,{initialValues:n.model,validationSchema:w,onSubmit:function(n,a){return e.onSubmit(n,a)},children:function(e){var a=e.isSubmitting;return(0,y.jsxs)(g.l0,{children:[(0,y.jsx)(Z.Z,{mb:4,children:(0,y.jsx)(I,{fullWidth:!0,variant:"filled",name:"courseId",label:"Mata Pelajaran"})}),(0,y.jsx)(Z.Z,{mb:4,children:(0,y.jsx)(S.a,{variant:"filled",fullWidth:!0,name:"teacherId",label:"Guru Pengajar"})}),(0,y.jsx)(Z.Z,{mt:4,children:(0,y.jsxs)(b.Z,{children:[(0,y.jsx)(l.Z,{color:"secondary",onClick:n.onCancel,disabled:a,variant:"text",disableElevation:!0,children:"Batal"}),(0,y.jsx)(C.M,{isSubmitting:a,text:"Simpan"})]})})]})}})})},F=a(14997),T=a(97890),R=function(){var n=(0,T.UO)().classroomId,e=(0,r.useState)(null),a=(0,i.Z)(e,2),s=a[0],g=a[1],v=(0,j.I0)(),Z=r.useRef(),b=r.useCallback((function(n,e){n.formMode=e,g(n)}),[]),C=r.useCallback((function(n){v((0,m.PV)("Mata Pelajaran berhasil disimpan")),Z.current.onQueryChange(),S()}),[]),P=r.useCallback((function(){v((0,m.Tl)("Mata Pelajaran gagal disimpan"))}),[]),S=r.useCallback((function(){g(null)}),[]),M=r.useCallback((function(){return f.$E.remove(s).then((function(n){n.status?(Z.current.onQueryChange(),v((0,m.PV)("Mata Pelajaran telah dihapus"))):v((0,m.Tl)("Mata Pelajaran gagal dihapus"))}))}),[s]);return(0,y.jsxs)(o.Z,{title:"Pengaturan Mata Pelajaran",showBackButton:!0,toolbar:(0,y.jsx)(l.Z,{variant:"contained",onClick:function(){var e=new h.dg;e.classroomId=n,g(e)},children:"Tambah Mata Pelajaran"}),children:[s&&("create"==s.formMode||"edit"==s.formMode)&&(0,y.jsx)(p.Z,{open:!0,title:s.isNewRecord?"Tambah Mata Pelajaran":"Perbarui Mata Pelajaran",children:(0,y.jsx)(c.Z,{children:(0,y.jsx)(E,{model:s,onCancel:S,onSaveFailed:P,onSaveSuccess:C})})}),s&&"delete"==s.formMode&&(0,y.jsx)(F.Z,{open:!0,onDeny:S,onConfirm:M,dialogTitle:"Hapus Mata Pelajaran",title:"Yakin ingin menghapus Mata Pelajaran <strong>".concat(s.name,"</strong> ?")}),(0,y.jsx)(d(),{title:"",tableRef:Z,components:{Toolbar:function(){return(0,y.jsx)(y.Fragment,{})},Container:function(n){return(0,y.jsx)(u.Z,(0,t.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(e){return new Promise((function(a,t){f.$E.findAllByClassroom(n,{page:e.page+1}).then((function(n){n.status&&n.items?a({data:n.items,page:n.page-1,totalCount:n.totalCount}):a({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Mata Pelajaran",field:"courseId",render:function(n){var e;return null===(e=n.course)||void 0===e?void 0:e.name}},{title:"Guru Pengajar",field:"teacherId",render:function(n){var e;return null===(e=n.teacher)||void 0===e?void 0:e.getFullName()}},{title:"Last Update",field:"updatedAt",render:function(n){return(0,x.ss)(n.updatedAt)}}],actions:[{icon:"create",tooltip:"Edit Mata Pelajaran",onClick:function(n,e){e instanceof h.dg&&b(e,"edit"),v((0,m.SR)())}},{icon:"delete",tooltip:"Hapus Mata Pelajaran",iconProps:{color:"error"},onClick:function(n,e){e instanceof h.dg&&b(e,"delete")}}]})]})}},65632:function(n,e,a){a.d(e,{a:function(){return s}});var t=a(1413),i=a(29439),r=a(47313),o=a(29417),l=a(97741),c=a(16330),u=a(46417),s=function(n){var e=r.useState([]),a=(0,i.Z)(e,2),s=a[0],d=a[1],f=r.useRef();r.useEffect((function(){h()}),[]);var h=function(){c.yH.findAll({page:0}).then((function(n){var e;d(null!==(e=n.items)&&void 0!==e?e:[]),console.log(f)}))};return(0,u.jsx)(o.Ph,(0,t.Z)((0,t.Z)({},n),{},{ref:f,children:s.map((function(e,a){return(0,u.jsx)(l.Z,{value:e.id,children:e.getFullName()},"".concat(n.name,"-select-option-").concat(a))}))}))}},14997:function(n,e,a){var t=a(29439),i=a(1413),r=a(47313),o=a(71003),l=a(1001),c=a(50301),u=a(94469),s=a(33604),d=a(47605),f=a(69625),h=a(6961),m=a(69680),j=a(20791),x=a(65476),p=a(46417),g=r.forwardRef((function(n,e){return(0,p.jsx)(c.Z,(0,i.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,a=n.onDeny,i=n.onConfirm,c=n.title,v=n.dialogTitle,Z=r.useState(!1),b=(0,t.Z)(Z,2),C=b[0],P=b[1];return(0,p.jsxs)(u.Z,{TransitionComponent:g,open:e,onClose:function(){return a(!1)},children:[(0,p.jsx)(s.Z,{children:(0,p.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:m.F3.SEMI_BOLD},id:"alert-dialog-title",children:v})}),(0,p.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,x.ZP)("".concat(c))}),(0,p.jsxs)(h.Z,{sx:{pb:5,px:6},children:[(0,p.jsx)(o.Z,{variant:"outlined",sx:{fontWeight:m.F3.MEDIUM,mr:4},onClick:function(){return a(!1)},color:"secondary",children:(0,p.jsx)(l.Z,{id:"common.no"})}),(0,p.jsx)(j.M,{isSubmitting:C,onClick:function(){P(!0),i().finally((function(){P(!1),a(!1)}))},text:"Lanjutkan"})]})]})}},33187:function(n,e,a){var t=a(1413),i=(a(47313),a(19860)),r=a(24813),o=a(94469),l=a(33604),c=a(46417);e.Z=function(n){var e=(0,i.Z)(),a=(0,r.Z)(e.breakpoints.down("sm"));return(0,c.jsxs)(o.Z,(0,t.Z)((0,t.Z)({fullWidth:!0,fullScreen:a,maxWidth:"sm"},n),{},{children:[n.title&&(0,c.jsx)(l.Z,{children:n.title}),n.children]}))}}}]);