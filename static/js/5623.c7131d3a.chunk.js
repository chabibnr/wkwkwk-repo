"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[5623],{69307:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var a=t(47313),i=t(71003),o=t(19641),l=t(57829),r=t(14924),s=t(5845),d=t.n(s),c=t(97548),u=t.n(c),h=t(46417);function f(e){var n={chart:{type:"pie"},title:{text:e.title},series:e.series,credits:{enabled:!1}};return(0,h.jsx)(u(),{highcharts:d(),options:n})}var m=t(16330),v=t(97890),x=t(62847),p=t(16169),Z=t(63492),g=t.n(Z),j=t(29439),b=t(85530),k=t.n(b),y=t(33187),C=t(81371),P=t(6961);function S(e){var n,t,o,l,r,s,c,f=e.data,m=(0,a.useState)(),v=(0,j.Z)(m,2),p=v[0],Z=v[1],g=[{name:"Sangat Paham",color:"#0a6100",data:null!==(n=null===f||void 0===f?void 0:f.data[5])&&void 0!==n?n:[]},{name:"Paham",color:"#00c20d",data:null!==(t=null===f||void 0===f?void 0:f.data[4])&&void 0!==t?t:[]},{name:"Cukup Paham",color:"#fbff00",data:null!==(o=null===f||void 0===f?void 0:f.data[3])&&void 0!==o?o:[]},{name:"Kurang Paham",color:"#ffa600",data:null!==(l=null===f||void 0===f?void 0:f.data[2])&&void 0!==l?l:[]},{name:"Tidak Paham",color:"#ff2a00",data:null!==(r=null===f||void 0===f?void 0:f.data[1])&&void 0!==r?r:[]},{name:"Tidak ada feedback",color:"#bbbfbc",data:null!==(s=null===f||void 0===f?void 0:f.data[0])&&void 0!==s?s:[]}],b={chart:{type:"column"},xAxis:{categories:null!==(c=null===f||void 0===f?void 0:f.title)&&void 0!==c?c:[],crosshair:!0},yAxis:{title:{text:"Pemahaman Siswa (%)"}},title:{text:"",style:{fontWeight:"bold"}},plotOptions:{series:{stacking:"percent",events:{click:function(e){if(console.log("click",e),f&&e.point){var n=f.detail[e.point.index];console.log("data",n),console.log("index",e.point.series.index,Math.abs(e.point.series.index-5));var t=new x.Zf;t.id=n.id,Z({model:t,level:Math.abs(e.point.series.index-5)})}}},dataLabels:{enabled:!0,inside:!0,align:"center"}}},series:g,credits:{enabled:!1}};return(0,h.jsxs)(h.Fragment,{children:[p&&(0,h.jsxs)(y.Z,{open:!0,maxWidth:"md",children:[(0,h.jsx)(C.Z,{model:p.model,level:p.level,fixedSize:!0}),(0,h.jsx)(P.Z,{children:(0,h.jsx)(i.Z,{onClick:function(){return Z(null)},children:"Tutup"})})]}),(0,h.jsx)(u(),{highcharts:d(),options:b})]})}k()(d());var w=t(92649),B=t(11579),R=function(e){var n,t,s=(0,v.UO)().courseClassroomId,d=((0,v.s0)(),a.useRef()),c=(0,w.W)(),u=c.resetLayout,Z=c.setTitle,j=c.setToolbar;a.useEffect((function(){u(),Z("Report Modul"),j((0,h.jsxs)(i.Z,{onClick:function(){g()(d.current)},fullWidth:!1,variant:"outlined",color:"primary","aria-label":"add",children:[(0,h.jsx)(p.Z,{}),"Download"]}))}),[]);var b=new x.dg;b.id=s;var k=(0,B.useQuery)(["report-module",s],(function(){return m.Xv.reportByCourseClassroom(b,{page:0})})).data;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{ref:d,children:[(0,h.jsxs)(o.ZP,{container:!0,spacing:8,children:[(0,h.jsx)(o.ZP,{item:!0,sm:12,md:6,children:(0,h.jsx)(r.Z,{children:(0,h.jsx)(f,{title:"Index Pemahaman Materi",series:[{name:"Siswa",data:null!==(n=null===k||void 0===k?void 0:k.summary)&&void 0!==n?n:[]}]})})}),(0,h.jsx)(o.ZP,{item:!0,sm:12,md:6,children:(0,h.jsx)(r.Z,{children:(0,h.jsx)(f,{title:"Waktu Rata-rata Membaca per Topik",series:[{name:"Jumlah Topik",data:null!==(t=null===k||void 0===k?void 0:k.avgDurationRead)&&void 0!==t?t:[]}]})})})]}),(0,h.jsx)(l.Z,{mt:8,children:(0,h.jsx)(r.Z,{title:"Pemahaman terhadap materi",children:(0,h.jsx)(S,{data:k})})})]})})}},81371:function(e,n,t){t.d(n,{Z:function(){return R}});var a=t(1413),i=t(29439),o=t(47313),l=t(40490),r=t.n(l),s=t(16330),d=t(57829),c=t(85345),u=t(40935),h=t(70816),f=t.n(h),m=t(11193),v=t(45987),x=t(88564),p=t(51885),Z=t(22429),g=t(70660),j=t(59656),b=t(99990),k=t(72469),y=t(46417),C=["value"],P=(0,x.ZP)(p.Z)((function(e){return{"& .MuiRating-iconEmpty .MuiSvgIcon-root":{color:e.theme.palette.action.disabled}}})),S={1:{icon:(0,y.jsx)(Z.Z,{color:"error"}),label:"Tidak Paham"},2:{icon:(0,y.jsx)(g.Z,{color:"error"}),label:"Kurang Paham"},3:{icon:(0,y.jsx)(j.Z,{color:"warning"}),label:"Cukup Paham"},4:{icon:(0,y.jsx)(b.Z,{color:"success"}),label:"Paham"},5:{icon:(0,y.jsx)(k.Z,{color:"success"}),label:"Sangat Paham"}};function w(e){var n=e.value,t=(0,v.Z)(e,C);return(0,y.jsx)("span",(0,a.Z)((0,a.Z)({},t),{},{children:S[n].icon}))}function B(e){var n,t=e.onValueChange,l=e.ratingProps,r=o.useState(null!==(n=null===l||void 0===l?void 0:l.value)&&void 0!==n?n:3),s=(0,i.Z)(r,2),c=s[0],u=s[1],h=o.useState(-1),f=(0,i.Z)(h,2),v=f[0],x=f[1];return(0,y.jsx)(m.Z,{title:null===c?"Tidak ada":S[-1!==v?v:c].label,children:(0,y.jsx)(d.Z,{display:"inline-block",children:(0,y.jsx)(P,(0,a.Z)({name:"highlight-selected-only",IconContainerComponent:w,onChange:function(e,n){u(n),t&&t(n)},onChangeActive:function(e,n){x(n)},highlightSelectedOnly:!0},l))})})}var R=function(e){var n=e.model,t=e.level,l=void 0===t?"all":t,h=e.fixedSize,v=void 0!==h&&h,x=o.createRef(),p=o.useState([]),Z=(0,i.Z)(p,2),g=Z[0],j=Z[1];o.useLayoutEffect((function(){console.log("tref",x),b()}),[]);var b=function(){var e;s.mu.findAllByTopic(null!==(e=null===n||void 0===n?void 0:n.id)&&void 0!==e?e:"",l,{page:0}).then((function(e){console.log(e);var n=[];null!=e.items&&e.items.map((function(e){var t,a;e.id=null!==(t=null===(a=e.student)||void 0===a?void 0:a.id)&&void 0!==t?t:"",n.push(e),e.records&&e.records.length>1&&e.records.map((function(t){t.parentId=e.id,delete t.student,n.push(t)}))})),console.log(n),j(n)}))};return(0,y.jsx)(d.Z,{children:(0,y.jsx)(r(),{tableRef:x,components:{Container:function(e){return(0,y.jsx)(c.Z,(0,a.Z)((0,a.Z)({},e),{},{elevation:0}))}},title:"Daftar Pembaca",options:{search:!1,pageSizeOptions:v?[5]:void 0,pageSize:v?5:10,sorting:!1,draggable:!1,actionsColumnIndex:-1,exportButton:{csv:!0},exportAllData:!0,exportCsv:function(e,n){var t=new u.CsvBuilder("download.csv"),a=[];g.forEach((function(e){var n;a.push([e.studentName,e.countRead,e.totalDuration,null!==(n=e.lastFeedback)&&void 0!==n?n:e.feedback,e.lastReadFormat])})),t.setDelimeter(",").setColumns(["Nama","Jumlah Membaca","Lama Membaca","Tingkat Pemahaman","Tanggal Membaca"]).addRows(a).exportFile()}},onRowClick:function(e,n,t){},data:g,parentChildData:function(e,n){return n.find((function(n){return n.id===e.parentId}))},columns:[{title:"Name",field:"studentName",render:function(e){return e.studentName}},{title:"Jumlah baca",field:"countRead",render:function(e){return e.hasReading?e.countRead:"Belum Membaca"}},{title:"Lama baca",field:"totalDuration",render:function(e){return e.hasReading?e.totalDuration:""}},{title:"Tingkat Pemahaman",field:"lastFeedback",render:function(e){return e.hasReading?(0,y.jsx)(B,{ratingProps:{readOnly:!0,size:"small",value:e.lastFeedback}}):""}},{title:"Terakhir Membaca",field:"lastReadFormat",render:function(e){return null==e.lastRead?"":(0,y.jsx)(m.Z,{title:e.lastReadFormat,children:(0,y.jsx)(d.Z,{children:f()(e.lastRead).fromNow()})})}}]})})}},92649:function(e,n,t){t.d(n,{Z:function(){return S},W:function(){return P}});var a=t(29439),i=t(57829),o=t(34499),l=t(37429),r=t(80836),s=t(83213),d=t(47313),c=t(26672),u=t(97890),h=t(94614),f=t(4942),m=t(57451),v=t(21212),x=t(57775),p=t(50301),Z=t(86302),g=t(1084),j=t(67375),b=t(46417),k=function(e){var n=e.isAppDrawerOpen,t=e.sidebarContent,a=(0,g.I0)();return(0,b.jsx)(p.Z,{direction:"right",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,b.jsxs)(i.Z,{sx:{width:{lg:280}},children:[(0,b.jsx)(m.Z,{lgUp:!0,children:(0,b.jsx)(v.ZP,{open:n,onClose:function(){return a((0,j.Y1)())},sx:(0,f.Z)({position:"absolute"},"& .".concat(Z.Z.paper),{width:280,"& .listItem":{zIndex:1305}}),children:t})}),(0,b.jsx)(m.Z,{lgDown:!0,children:(0,b.jsx)(x.Z,{style:{height:"100%"},children:t})})]})})},y=t(19406),C=d.createContext({setTitle:function(e){},setSubtitle:function(e){},setShowBackButton:function(e){},setOnBackButtonPress:function(e){},setToolbar:function(e){},resetLayout:function(){}}),P=function(){return(0,d.useContext)(C)},S=function(e){var n=(0,d.useState)(),t=(0,a.Z)(n,2),f=t[0],m=t[1],v=(0,d.useState)(e.toolbar),x=(0,a.Z)(v,2),p=x[0],Z=x[1],j=(0,d.useState)(),P=(0,a.Z)(j,2),S=P[0],w=P[1],B=(0,d.useState)(e.showBackButton),R=(0,a.Z)(B,2),T=R[0],D=R[1],I=(0,d.useState)(e.fullView),M=(0,a.Z)(I,2),O=M[0],A=(M[1],(0,d.useState)()),F=(0,a.Z)(A,2),z=F[0],W=F[1],E=(0,d.useState)(e.sidebarContent),L=(0,a.Z)(E,2),N=L[0],_=(L[1],(0,d.useState)(e.contentPadding)),J=(0,a.Z)(_,2),U=J[0],V=(J[1],(0,u.s0)()),K=(0,d.useCallback)((function(){V(-1)}),[history]),Q=((0,g.I0)(),(0,g.v9)((function(e){return e.common})).isAppDrawerOpen),X=(0,y.l5)().footer,Y=((0,y.l5)().navStyle,null!==f&&void 0!==f?f:e.title),q=null!==S&&void 0!==S?S:e.subTitle,G=null!==p&&void 0!==p?p:e.toolbar,H=null!==T&&void 0!==T?T:e.showBackButton,$=null!==z&&void 0!==z?z:e.onBackButtonPress;return(0,d.useEffect)((function(){document.title=null!==Y&&void 0!==Y?Y:"AFresto System Indonesia"}),[Y]),(0,b.jsx)(C.Provider,{value:{setTitle:m,setSubtitle:w,setOnBackButtonPress:W,setShowBackButton:D,setToolbar:Z,resetLayout:function(){m(void 0),w(void 0),D(void 0),W(void 0),Z(void 0)}},children:(0,b.jsxs)(i.Z,{children:[Y&&(0,b.jsxs)(o.ZP,{component:"div",sx:{backgroundColor:"#fff",borderBottom:"1px solid #ccc",position:"sticky",top:"70px",zIndex:99},secondaryAction:G,children:[H&&(0,b.jsx)(l.Z,{children:(0,b.jsx)(r.Z,{onClick:null!==$&&void 0!==$?$:K,children:(0,b.jsx)(c.x_l,{})})}),(0,b.jsx)(s.Z,{primary:Y,primaryTypographyProps:{fontSize:20},secondary:q})]}),(0,b.jsx)(h.uc,{animation:"transition.slideUpIn",delay:200,children:(0,b.jsx)(i.Z,{sx:{p:null!==U&&void 0!==U?U:{xs:5,md:7.5,xl:12.5}},children:N?(0,b.jsxs)(i.Z,{sx:{display:"flex"},children:[N?(0,b.jsx)(i.Z,{children:(0,b.jsx)(k,{isAppDrawerOpen:Q,footer:X,fullView:O,sidebarContent:N})}):null,(0,b.jsx)(i.Z,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",lg:"calc(100% - ".concat(O?0:280,"px)")},pl:{lg:O?0:8}},children:e.children})]}):e.children})})]})})}},33187:function(e,n,t){var a=t(1413),i=(t(47313),t(19860)),o=t(24813),l=t(94469),r=t(33604),s=t(46417);n.Z=function(e){var n=(0,i.Z)(),t=(0,o.Z)(n.breakpoints.down("sm"));return(0,s.jsxs)(l.Z,(0,a.Z)((0,a.Z)({fullWidth:!0,fullScreen:t,maxWidth:"sm"},e),{},{children:[e.title&&(0,s.jsx)(r.Z,{children:e.title}),e.children]}))}}}]);