"use strict";(self.webpackChunkcra_ts_5=self.webpackChunkcra_ts_5||[]).push([[8884],{74419:function(n,e,t){t.r(e),t.d(e,{default:function(){return Q}});var i=t(1413),r=t(29439),o=t(47313),a=t(92649),l=t(71003),s=t(69625),u=t(57775),c=t(40490),d=t.n(c),f=t(16330),h=t(62847),m=t(67375),x=t(1084),p=t(2682),v=t(33187),j=t(79842),Z=t(3463),g=t(57829),b=t(6961),S=t(20791),y=t(56417),C=t(65632),P=t(29417),k=t(97741),T=t(46417),B=function(n){var e=o.useState([]),t=(0,r.Z)(e,2),a=t[0],l=t[1];o.useEffect((function(){s()}),[]);var s=function(){f.JC.findAll({page:0}).then((function(n){var e;l(null!==(e=n.items)&&void 0!==e?e:[])}))};return(0,T.jsx)(P.Ph,(0,i.Z)((0,i.Z)({},n),{},{children:a.map((function(e,t){return(0,T.jsx)(k.Z,{value:e.id,children:e.name},"".concat(n.name,"-select-option-").concat(t))}))}))},w=Z.Ry({courseId:Z.Z_().required("Mata Pelajaran harus dipilih")}),M=function(n){var e=new y.O(f.$E,{onSaveSuccess:n.onSaveSuccess,onSaveFailed:n.onSaveFailed});return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(j.J9,{initialValues:n.model,validationSchema:w,onSubmit:function(n,t){return e.onSubmit(n,t)},children:function(e){var t=e.isSubmitting;return(0,T.jsxs)(j.l0,{children:[(0,T.jsx)(g.Z,{mb:4,children:(0,T.jsx)(B,{fullWidth:!0,variant:"filled",name:"courseId",label:"Mata Pelajaran"})}),(0,T.jsx)(g.Z,{mb:4,children:(0,T.jsx)(C.a,{variant:"filled",fullWidth:!0,name:"teacherId",label:"Guru Pengajar"})}),(0,T.jsx)(g.Z,{mt:4,children:(0,T.jsxs)(b.Z,{children:[(0,T.jsx)(l.Z,{color:"secondary",onClick:n.onCancel,disabled:t,variant:"text",disableElevation:!0,children:"Batal"}),(0,T.jsx)(S.M,{isSubmitting:t,text:"Simpan"})]})})]})}})})},F=t(14997),I=t(97890),_=t(3191),O=t(34499),R=t(37429),A=t(83213),E=t(94614),G=t(63855),z=t(93433),N=t(20050),D=t(63585),U=t(32916),W=function(n){var e,t=n.model,i=n.selected,r=n.selectItem,o=n.unSelectItem;return(0,T.jsxs)(O.ZP,{button:!0,onClick:function(){return i?o(t.id):r(t.id)},sx:{outline:i?"1px solid rgba(10, 143, 220, 0.5)":"none",backgroundColor:"#fff",borderRadius:"16px"},children:[(0,T.jsx)(R.Z,{children:(0,T.jsx)(D.Z,{sx:{bgcolor:i?"rgba(10, 143, 220, 1)":""},children:i?(0,T.jsx)(U.UgA,{}):"A"})}),(0,T.jsx)(A.Z,{primary:t.getFullName(),secondary:null!==(e=t.nis)&&void 0!==e?e:"-"})]})},V=t(11579),L=function(n){var e,t,a=n.dialogProps,u=n.title,c=n.onFinish,d=n.onCancel,f=n.submitText,h=void 0===f?"Finish":f,m=n.query,x=n.multiple,p=void 0===x||x,j=o.useState(!1),Z=(0,r.Z)(j,2),y=Z[0],C=Z[1],P=o.useState([]),k=(0,r.Z)(P,2),B=k[0],w=k[1],M=(0,V.useQuery)(["item-chooser-data"],(function(){return m()})).data,F=function(n){p?(B.push(n),w((0,z.Z)(B))):w([n])},I=function(n){var e=B.indexOf(n);B.splice(e,1),w((0,z.Z)(B))};return(0,T.jsxs)(v.Z,(0,i.Z)((0,i.Z)({title:u,open:!0,maxWidth:"lg"},a),{},{children:[(0,T.jsx)(s.Z,{children:(0,T.jsx)(g.Z,{m:2,bgcolor:"#cccccc4f",borderRadius:"16px",p:4,display:"grid",children:(0,T.jsx)(E.O1,{data:null!==(e=null===M||void 0===M?void 0:M.items)&&void 0!==e?e:[],responsive:{xs:2,sm:3},renderRow:function(n,e){return(0,T.jsx)(W,{model:n,selectItem:F,unSelectItem:I,selected:-1!==B.indexOf(n.id)})}})})}),(0,T.jsxs)(b.Z,{sx:{display:"flex",justifyContent:"space-between",paddingLeft:8,paddingRight:8,marginBottom:4,paddingTop:0,paddingBottom:0},children:[(0,T.jsx)(g.Z,{children:(0,T.jsx)(N.Z,{page:1,count:null!==(t=null===M||void 0===M?void 0:M.totalPages)&&void 0!==t?t:0,variant:"outlined",color:"primary"})}),(0,T.jsxs)(g.Z,{ml:"auto",children:[(0,T.jsx)(l.Z,{variant:"outlined",onClick:d,color:"error",sx:{marginRight:"10px"},children:"Tutup"}),(0,T.jsx)(S.M,{isSubmitting:y,text:h,onClick:function(){C(!0),c(B).finally((function(){return C(!1)}))}})]})]})]}))},H=function(n){var e=n.items,t=n.onClose,i=n.isPrimary,a=n.model,s=(0,x.I0)(),u=o.useState(!1),c=(0,r.Z)(u,2),d=c[0],h=c[1],p=o.useCallback((function(n){return f.$E.addTeachers(a,n,i).then((function(n){n.status?(s((0,m.PV)("Guru telah ditambahkan")),t()):s((0,m.PV)("Guru gagal ditambahkan"))}))}),[]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(v.Z,{open:!0,title:i?"Guru Pengajar":"Guru Pembantu",children:[e&&(0,T.jsx)(_.Z,{children:(0,T.jsx)(E.u3,{data:e,renderRow:function(n){return(0,T.jsxs)(O.ZP,{children:[(0,T.jsx)(R.Z,{children:(0,T.jsx)(G.Z,{title:n.getFullName(),status:n.visibilityStatus})}),(0,T.jsx)(A.Z,{primary:n.getFullName(),secondary:n.nip})]})}})}),(0,T.jsxs)(b.Z,{children:[(0,T.jsx)(l.Z,{color:"error",onClick:t,children:"Tutup"}),(0,T.jsx)(l.Z,{variant:"outlined",onClick:function(){return h(!0)},children:"Tambah Guru"})]})]}),d&&(0,T.jsx)(L,{multiple:!i,title:"Pilih Guru "+(i?"Utama":"Pembantu"),onCancel:function(){return h(!1)},onFinish:p,query:function(){return f.yH.findAll({page:0})},submitText:"Tambahkan"})]})},Q=function(){var n=(0,I.UO)().classroomId,e=(0,o.useState)(null),t=(0,r.Z)(e,2),c=t[0],j=t[1],Z=(0,o.useState)(),g=(0,r.Z)(Z,2),b=g[0],S=g[1],y=(0,x.I0)(),C=o.useRef(),P=o.useCallback((function(n,e){n.formMode=e,j(n)}),[]),k=o.useCallback((function(n){y((0,m.PV)("Mata Pelajaran berhasil disimpan")),C.current.onQueryChange(),w()}),[]),B=o.useCallback((function(){y((0,m.Tl)("Mata Pelajaran gagal disimpan"))}),[]),w=o.useCallback((function(){j(null)}),[]),_=o.useCallback((function(){return f.$E.remove(c).then((function(n){n.status?(C.current.onQueryChange(),y((0,m.PV)("Mata Pelajaran telah dihapus"))):y((0,m.Tl)("Mata Pelajaran gagal dihapus"))}))}),[c]);return(0,T.jsxs)(a.Z,{title:"Pengaturan Mata Pelajaran",showBackButton:!0,toolbar:(0,T.jsx)(l.Z,{variant:"contained",onClick:function(){var e=new h.dg;e.classroomId=n,j(e)},children:"Tambah Mata Pelajaran"}),children:[c&&("create"==c.formMode||"edit"==c.formMode)&&(0,T.jsx)(v.Z,{open:!0,title:c.isNewRecord?"Tambah Mata Pelajaran":"Perbarui Mata Pelajaran",children:(0,T.jsx)(s.Z,{children:(0,T.jsx)(M,{model:c,onCancel:w,onSaveFailed:B,onSaveSuccess:k})})}),c&&"delete"==c.formMode&&(0,T.jsx)(F.Z,{open:!0,onDeny:w,onConfirm:_,dialogTitle:"Hapus Mata Pelajaran",title:"Yakin ingin menghapus Mata Pelajaran <strong>".concat(c.name,"</strong> ?")}),(0,T.jsx)(d(),{title:"",tableRef:C,components:{Toolbar:function(){return(0,T.jsx)(T.Fragment,{})},Container:function(n){return(0,T.jsx)(u.Z,(0,i.Z)({},n))}},options:{search:!1,pageSize:10,sorting:!1,draggable:!1,actionsColumnIndex:-1},data:function(e){return new Promise((function(t,i){f.$E.findAllByClassroom(n,{page:e.page+1}).then((function(n){n.status&&n.items?t({data:n.items,page:n.page-1,totalCount:n.totalCount}):t({data:[],page:0,totalCount:0})}))}))},columns:[{title:"Mata Pelajaran",field:"courseId",render:function(n){var e;return null===(e=n.course)||void 0===e?void 0:e.name}},{title:"Guru Pengajar",field:"teacherId",align:"center",render:function(n){var e;return n.primaryTeacher?(0,T.jsx)(l.Z,{onClick:function(){return S({primary:!0,model:n,items:[n.primaryTeacher]})},size:"small",variant:"text",children:null===(e=n.primaryTeacher)||void 0===e?void 0:e.getFullName()}):(0,T.jsx)(l.Z,{color:"error",onClick:function(){return S({primary:!0,model:n,items:[]})},size:"small",variant:"text",children:"Tambah Guru"})}},{title:"Guru Pembantu",field:"teacherId",align:"center",render:function(n){var e=n.secondaryTeachers;return 0==e.length?(0,T.jsx)(l.Z,{color:"error",size:"small",variant:"text",onClick:function(){return S({primary:!1,model:n,items:[]})},children:"Tambah Guru Pembantu"}):(0,T.jsxs)(l.Z,{onClick:function(){return S({primary:!1,model:n,items:e})},size:"small",variant:"text",children:[e.length," Guru"]})}},{title:"Last Update",field:"updatedAt",render:function(n){return(0,p.ss)(n.updatedAt)}}],actions:[{icon:"create",tooltip:"Edit Mata Pelajaran",onClick:function(n,e){e instanceof h.dg&&P(e,"edit"),y((0,m.SR)())}},{icon:"delete",tooltip:"Hapus Mata Pelajaran",iconProps:{color:"error"},onClick:function(n,e){e instanceof h.dg&&P(e,"delete")}}]}),b&&(0,T.jsx)(H,{isPrimary:b.primary,items:b.items,model:b.model,onClose:function(){C.current.onQueryChange(),S(void 0)}})]})}},65632:function(n,e,t){t.d(e,{a:function(){return c}});var i=t(1413),r=t(29439),o=t(47313),a=t(29417),l=t(97741),s=t(16330),u=t(46417),c=function(n){var e=o.useState([]),t=(0,r.Z)(e,2),c=t[0],d=t[1],f=o.useRef();o.useEffect((function(){h()}),[]);var h=function(){s.yH.findAll({page:0}).then((function(n){var e;d(null!==(e=n.items)&&void 0!==e?e:[]),console.log(f)}))};return(0,u.jsx)(a.Ph,(0,i.Z)((0,i.Z)({},n),{},{ref:f,children:c.map((function(e,t){return(0,u.jsx)(l.Z,{value:e.id,children:e.getFullName()},"".concat(n.name,"-select-option-").concat(t))}))}))}},63855:function(n,e,t){var i=t(1413),r=t(45987),o=(t(47313),t(63585)),a=t(50919),l=t(46417),s=["className","title","url","status"];e.Z=function(n){var e,t,u=n.className,c=n.title,d=n.url,f=n.status,h=(0,r.Z)(n,s),m={online:"#11C15B",offline:"#F04F47",busy:"#ffba52"};return void 0==f&&(f="offline"),(0,l.jsx)(a.Z,{anchorOrigin:{horizontal:"right",vertical:"bottom"},color:"success",variant:"dot",overlap:"circular",sx:{"& .MuiBadge-badge":{backgroundColor:null!==(e=m[f])&&void 0!==e?e:m.offline,color:null!==(t=m[f])&&void 0!==t?t:m.offline,width:12,height:12,bottom:"15%",right:"15%",border:"2px solid #fff",borderRadius:12,"&::after":"online"!==f?{}:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}}},children:d?(0,l.jsx)(o.Z,(0,i.Z)({className:u,src:d},h)):(0,l.jsx)(o.Z,(0,i.Z)((0,i.Z)({className:u},h),{},{children:c.charAt(1).toUpperCase()}))})}},14997:function(n,e,t){var i=t(29439),r=t(1413),o=t(47313),a=t(71003),l=t(1001),s=t(50301),u=t(94469),c=t(33604),d=t(47605),f=t(69625),h=t(6961),m=t(69680),x=t(20791),p=t(65476),v=t(46417),j=o.forwardRef((function(n,e){return(0,v.jsx)(s.Z,(0,r.Z)({direction:"up",ref:e},n))}));e.Z=function(n){var e=n.open,t=n.onDeny,r=n.onConfirm,s=n.title,Z=n.dialogTitle,g=o.useState(!1),b=(0,i.Z)(g,2),S=b[0],y=b[1];return(0,v.jsxs)(u.Z,{TransitionComponent:j,open:e,onClose:function(){return t(!1)},children:[(0,v.jsx)(c.Z,{children:(0,v.jsx)(d.Z,{component:"h4",variant:"h4",sx:{mb:3,fontWeight:m.F3.SEMI_BOLD},id:"alert-dialog-title",children:Z})}),(0,v.jsx)(f.Z,{sx:{color:"text.secondary",fontSize:14},id:"alert-dialog-description",children:(0,p.ZP)("".concat(s))}),(0,v.jsxs)(h.Z,{sx:{pb:5,px:6},children:[(0,v.jsx)(a.Z,{variant:"outlined",sx:{fontWeight:m.F3.MEDIUM,mr:4},onClick:function(){return t(!1)},color:"secondary",children:(0,v.jsx)(l.Z,{id:"common.no"})}),(0,v.jsx)(x.M,{isSubmitting:S,onClick:function(){y(!0),r().finally((function(){y(!1),t(!1)}))},text:"Lanjutkan"})]})]})}},92649:function(n,e,t){t.d(e,{Z:function(){return k},W:function(){return P}});var i=t(29439),r=t(57829),o=t(34499),a=t(37429),l=t(80836),s=t(83213),u=t(47313),c=t(26672),d=t(97890),f=t(94614),h=t(4942),m=t(57451),x=t(21212),p=t(57775),v=t(50301),j=t(86302),Z=t(1084),g=t(67375),b=t(46417),S=function(n){var e=n.isAppDrawerOpen,t=n.sidebarContent,i=(0,Z.I0)();return(0,b.jsx)(v.Z,{direction:"right",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,b.jsxs)(r.Z,{sx:{width:{lg:280}},children:[(0,b.jsx)(m.Z,{lgUp:!0,children:(0,b.jsx)(x.ZP,{open:e,onClose:function(){return i((0,g.Y1)())},sx:(0,h.Z)({position:"absolute"},"& .".concat(j.Z.paper),{width:280,"& .listItem":{zIndex:1305}}),children:t})}),(0,b.jsx)(m.Z,{lgDown:!0,children:(0,b.jsx)(p.Z,{style:{height:"100%"},children:t})})]})})},y=t(19406),C=u.createContext({setTitle:function(n){},setSubtitle:function(n){},setShowBackButton:function(n){},setOnBackButtonPress:function(n){},setToolbar:function(n){},resetLayout:function(){}}),P=function(){return(0,u.useContext)(C)},k=function(n){var e=(0,u.useState)(),t=(0,i.Z)(e,2),h=t[0],m=t[1],x=(0,u.useState)(n.toolbar),p=(0,i.Z)(x,2),v=p[0],j=p[1],g=(0,u.useState)(),P=(0,i.Z)(g,2),k=P[0],T=P[1],B=(0,u.useState)(n.showBackButton),w=(0,i.Z)(B,2),M=w[0],F=w[1],I=(0,u.useState)(n.fullView),_=(0,i.Z)(I,2),O=_[0],R=(_[1],(0,u.useState)()),A=(0,i.Z)(R,2),E=A[0],G=A[1],z=(0,u.useState)(n.sidebarContent),N=(0,i.Z)(z,2),D=N[0],U=(N[1],(0,u.useState)(n.contentPadding)),W=(0,i.Z)(U,2),V=W[0],L=(W[1],(0,d.s0)()),H=(0,u.useCallback)((function(){L(-1)}),[history]),Q=((0,Z.I0)(),(0,Z.v9)((function(n){return n.common})).isAppDrawerOpen),$=(0,y.l5)().footer,q=((0,y.l5)().navStyle,null!==h&&void 0!==h?h:n.title),J=null!==k&&void 0!==k?k:n.subTitle,Y=null!==v&&void 0!==v?v:n.toolbar,K=null!==M&&void 0!==M?M:n.showBackButton,X=null!==E&&void 0!==E?E:n.onBackButtonPress;return(0,u.useEffect)((function(){document.title=null!==q&&void 0!==q?q:"AFresto System Indonesia"}),[q]),(0,b.jsx)(C.Provider,{value:{setTitle:m,setSubtitle:T,setOnBackButtonPress:G,setShowBackButton:F,setToolbar:j,resetLayout:function(){m(void 0),T(void 0),F(void 0),G(void 0),j(void 0)}},children:(0,b.jsxs)(r.Z,{children:[q&&(0,b.jsxs)(o.ZP,{component:"div",sx:{backgroundColor:"#fff",borderBottom:"1px solid #ccc",position:"sticky",top:"70px",zIndex:99},secondaryAction:Y,children:[K&&(0,b.jsx)(a.Z,{children:(0,b.jsx)(l.Z,{onClick:null!==X&&void 0!==X?X:H,children:(0,b.jsx)(c.x_l,{})})}),(0,b.jsx)(s.Z,{primary:q,primaryTypographyProps:{fontSize:20},secondary:J})]}),(0,b.jsx)(f.uc,{animation:"transition.slideUpIn",delay:200,children:(0,b.jsx)(r.Z,{sx:{p:null!==V&&void 0!==V?V:{xs:5,md:7.5,xl:12.5}},children:D?(0,b.jsxs)(r.Z,{sx:{display:"flex"},children:[D?(0,b.jsx)(r.Z,{children:(0,b.jsx)(S,{isAppDrawerOpen:Q,footer:$,fullView:O,sidebarContent:D})}):null,(0,b.jsx)(r.Z,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",lg:"calc(100% - ".concat(O?0:280,"px)")},pl:{lg:O?0:8}},children:n.children})]}):n.children})})]})})}},33187:function(n,e,t){var i=t(1413),r=(t(47313),t(19860)),o=t(24813),a=t(94469),l=t(33604),s=t(46417);e.Z=function(n){var e=(0,r.Z)(),t=(0,o.Z)(e.breakpoints.down("sm"));return(0,s.jsxs)(a.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,fullScreen:t,maxWidth:"sm"},n),{},{children:[n.title&&(0,s.jsx)(l.Z,{children:n.title}),n.children]}))}},56417:function(n,e,t){t.d(e,{O:function(){return o}});var i=t(15671),r=t(43144),o=function(){function n(e,t,r){(0,i.Z)(this,n),this.repository=void 0,this._onSaveSuccess=void 0,this._onSaveFailed=void 0,this._onBeforeSubmit=void 0,this.repository=e,this._onSaveSuccess=t.onSaveSuccess,this._onSaveFailed=t.onSaveFailed,this._onBeforeSubmit=null===r||void 0===r?void 0:r.onBeforeSubmit}return(0,r.Z)(n,[{key:"submitToServer",value:function(n){return this._onBeforeSubmit&&(n=this._onBeforeSubmit(n)),n.id?this.repository.update(n):this.repository.create(n)}},{key:"onSubmit",value:function(n,e,t){var i=this,r=e.setSubmitting,o=e.resetForm;r(!0),this.submitToServer(n).then((function(n){n.status?(!0===t&&o(),i._onSaveSuccess&&i._onSaveSuccess(n.item)):i._onSaveFailed&&i._onSaveFailed(),r(!1)}))}}]),n}()}}]);